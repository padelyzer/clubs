
> bmad-nextjs-app@0.1.0 dev
> next dev

   ▲ Next.js 15.5.4
   - Local:        http://localhost:3000
   - Network:      http://192.168.100.41:3000
   - Environments: .env.local, .env.development, .env

 ✓ Starting...
 ✓ Ready in 1690ms
 ✓ Compiled /middleware in 168ms (159 modules)
 ○ Compiling / ...
 ✓ Compiled / in 1504ms (691 modules)
 HEAD / 307 in 1781ms
 ○ Compiling /c/[clubSlug]/dashboard/bookings/calendar ...
 ✓ Compiled /c/[clubSlug]/dashboard/bookings/calendar in 1045ms (2091 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."role"::text, "public"."User"."clubId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."status"::text, "public"."Club"."active" FROM "public"."Club" WHERE ("public"."Club"."slug" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."UserPermission"."id", "public"."UserPermission"."moduleCode", "public"."UserPermission"."userId" FROM "public"."UserPermission" WHERE "public"."UserPermission"."userId" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubModule"."id", "public"."ClubModule"."clubId", "public"."ClubModule"."moduleId", "public"."ClubModule"."isEnabled", "public"."ClubModule"."enabledAt", "public"."ClubModule"."disabledAt", "public"."ClubModule"."gracePeriodEnd", "public"."ClubModule"."lastExportAt", "public"."ClubModule"."settings", "public"."ClubModule"."createdAt", "public"."ClubModule"."updatedAt" FROM "public"."ClubModule" WHERE ("public"."ClubModule"."clubId" = $1 AND "public"."ClubModule"."isEnabled" = $2) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubPackage"."id", "public"."ClubPackage"."clubId", "public"."ClubPackage"."packageId", "public"."ClubPackage"."isActive", "public"."ClubPackage"."activatedAt", "public"."ClubPackage"."deactivatedAt", "public"."ClubPackage"."customPricing", "public"."ClubPackage"."notes", "public"."ClubPackage"."createdAt", "public"."ClubPackage"."updatedAt" FROM "public"."ClubPackage" WHERE ("public"."ClubPackage"."clubId" = $1 AND "public"."ClubPackage"."isActive" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
 GET /c/club-demo-padelyzer/dashboard/bookings/calendar 200 in 4032ms
 ⚠ Cross origin request detected from 192.168.100.41 to /_next/* resource. In a future major version of Next.js, you will need to explicitly configure "allowedDevOrigins" in next.config to allow this.
Read more: https://nextjs.org/docs/app/api-reference/config/next-config-js/allowedDevOrigins
 ✓ Compiled /api/bookings in 199ms (1187 modules)
 ✓ Compiled in 225ms (907 modules)
 GET /favicon.ico 200 in 1318ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT 1
prisma:query COMMIT
 GET /api/health 200 in 2015ms
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."timezone" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Court"."id", "public"."Court"."name", "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active" FROM "public"."Court" WHERE ("public"."Court"."clubId" = $1 AND "public"."Court"."active" = $2) ORDER BY "public"."Court"."order" ASC OFFSET $3
prisma:query COMMIT
prisma:query COMMIT
 GET /api/courts 200 in 2900ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_splitPayments", 0) AS "_aggr_count_splitPayments", COALESCE("aggr_selection_1_Payment"."_aggr_count_payments", 0) AS "_aggr_count_payments", COALESCE("aggr_selection_2_Booking"."_aggr_count_bookings", 0) AS "_aggr_count_bookings" FROM "public"."BookingGroup" LEFT JOIN (SELECT "public"."SplitPayment"."bookingGroupId", COUNT(*) AS "_aggr_count_splitPayments" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingGroupId") AS "aggr_selection_0_SplitPayment" ON ("public"."BookingGroup"."id" = "aggr_selection_0_SplitPayment"."bookingGroupId") LEFT JOIN (SELECT "public"."Payment"."bookingGroupId", COUNT(*) AS "_aggr_count_payments" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingGroupId") AS "aggr_selection_1_Payment" ON ("public"."BookingGroup"."id" = "aggr_selection_1_Payment"."bookingGroupId") LEFT JOIN (SELECT "public"."Booking"."bookingGroupId", COUNT(*) AS "_aggr_count_bookings" FROM "public"."Booking" WHERE 1=1 GROUP BY "public"."Booking"."bookingGroupId") AS "aggr_selection_2_Booking" ON ("public"."BookingGroup"."id" = "aggr_selection_2_Booking"."bookingGroupId") WHERE ("public"."BookingGroup"."clubId" = $1 AND "public"."BookingGroup"."date" >= $2 AND "public"."BookingGroup"."date" <= $3 AND "public"."BookingGroup"."status" <> CAST($4::text AS "public"."BookingStatus")) ORDER BY "public"."BookingGroup"."date" ASC, "public"."BookingGroup"."startTime" ASC OFFSET $5
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE "public"."Booking"."bookingGroupId" IN ($1) OFFSET $2
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2) OFFSET $3
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingGroupId" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query SELECT "public"."Court"."id", "public"."Court"."name", "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active" FROM "public"."Court" WHERE ("public"."Court"."clubId" = $1 AND "public"."Court"."active" = $2) ORDER BY "public"."Court"."order" ASC OFFSET $3
prisma:query COMMIT
 GET /api/courts 200 in 836ms
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_SplitPayment", 0) AS "_aggr_count_SplitPayment", COALESCE("aggr_selection_1_Payment"."_aggr_count_Payment", 0) AS "_aggr_count_Payment" FROM "public"."Booking" LEFT JOIN (SELECT "public"."SplitPayment"."bookingId", COUNT(*) AS "_aggr_count_SplitPayment" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingId") AS "aggr_selection_0_SplitPayment" ON ("public"."Booking"."id" = "aggr_selection_0_SplitPayment"."bookingId") LEFT JOIN (SELECT "public"."Payment"."bookingId", COUNT(*) AS "_aggr_count_Payment" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingId") AS "aggr_selection_1_Payment" ON ("public"."Booking"."id" = "aggr_selection_1_Payment"."bookingId") WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."date" <= $3 AND "public"."Booking"."status" <> CAST($4::text AS "public"."BookingStatus") AND "public"."Booking"."bookingGroupId" IS NULL) ORDER BY "public"."Booking"."date" ASC, "public"."Booking"."startTime" ASC OFFSET $5
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingId" IN ($1,$2,$3,$4) OFFSET $5
prisma:query COMMIT
 GET /api/bookings?startDate=2025-09-01&endDate=2025-09-30 200 in 4288ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."timezone" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_splitPayments", 0) AS "_aggr_count_splitPayments", COALESCE("aggr_selection_1_Payment"."_aggr_count_payments", 0) AS "_aggr_count_payments", COALESCE("aggr_selection_2_Booking"."_aggr_count_bookings", 0) AS "_aggr_count_bookings" FROM "public"."BookingGroup" LEFT JOIN (SELECT "public"."SplitPayment"."bookingGroupId", COUNT(*) AS "_aggr_count_splitPayments" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingGroupId") AS "aggr_selection_0_SplitPayment" ON ("public"."BookingGroup"."id" = "aggr_selection_0_SplitPayment"."bookingGroupId") LEFT JOIN (SELECT "public"."Payment"."bookingGroupId", COUNT(*) AS "_aggr_count_payments" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingGroupId") AS "aggr_selection_1_Payment" ON ("public"."BookingGroup"."id" = "aggr_selection_1_Payment"."bookingGroupId") LEFT JOIN (SELECT "public"."Booking"."bookingGroupId", COUNT(*) AS "_aggr_count_bookings" FROM "public"."Booking" WHERE 1=1 GROUP BY "public"."Booking"."bookingGroupId") AS "aggr_selection_2_Booking" ON ("public"."BookingGroup"."id" = "aggr_selection_2_Booking"."bookingGroupId") WHERE ("public"."BookingGroup"."clubId" = $1 AND "public"."BookingGroup"."date" >= $2 AND "public"."BookingGroup"."date" <= $3 AND "public"."BookingGroup"."status" <> CAST($4::text AS "public"."BookingStatus")) ORDER BY "public"."BookingGroup"."date" ASC, "public"."BookingGroup"."startTime" ASC OFFSET $5
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE "public"."Booking"."bookingGroupId" IN ($1) OFFSET $2
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingGroupId" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_SplitPayment", 0) AS "_aggr_count_SplitPayment", COALESCE("aggr_selection_1_Payment"."_aggr_count_Payment", 0) AS "_aggr_count_Payment" FROM "public"."Booking" LEFT JOIN (SELECT "public"."SplitPayment"."bookingId", COUNT(*) AS "_aggr_count_SplitPayment" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingId") AS "aggr_selection_0_SplitPayment" ON ("public"."Booking"."id" = "aggr_selection_0_SplitPayment"."bookingId") LEFT JOIN (SELECT "public"."Payment"."bookingId", COUNT(*) AS "_aggr_count_Payment" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingId") AS "aggr_selection_1_Payment" ON ("public"."Booking"."id" = "aggr_selection_1_Payment"."bookingId") WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."date" <= $3 AND "public"."Booking"."status" <> CAST($4::text AS "public"."BookingStatus") AND "public"."Booking"."bookingGroupId" IS NULL) ORDER BY "public"."Booking"."date" ASC, "public"."Booking"."startTime" ASC OFFSET $5
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingId" IN ($1,$2,$3,$4) OFFSET $5
prisma:query COMMIT
 GET /api/bookings?startDate=2025-09-01&endDate=2025-09-30 200 in 2369ms
 ○ Compiling /c/[clubSlug]/dashboard/bookings ...
 ✓ Compiled /c/[clubSlug]/dashboard/bookings in 737ms (2659 modules)
 GET /c/club-demo-padelyzer/dashboard/bookings 200 in 1300ms
 ✓ Compiled /api/settings/courts in 484ms (2663 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
 GET /favicon.ico 200 in 642ms
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."timezone" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query DEALLOCATE ALL
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query COMMIT
prisma:query BEGIN
prisma:query BEGIN
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_splitPayments", 0) AS "_aggr_count_splitPayments", COALESCE("aggr_selection_1_Payment"."_aggr_count_payments", 0) AS "_aggr_count_payments", COALESCE("aggr_selection_2_Booking"."_aggr_count_bookings", 0) AS "_aggr_count_bookings" FROM "public"."BookingGroup" LEFT JOIN (SELECT "public"."SplitPayment"."bookingGroupId", COUNT(*) AS "_aggr_count_splitPayments" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingGroupId") AS "aggr_selection_0_SplitPayment" ON ("public"."BookingGroup"."id" = "aggr_selection_0_SplitPayment"."bookingGroupId") LEFT JOIN (SELECT "public"."Payment"."bookingGroupId", COUNT(*) AS "_aggr_count_payments" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingGroupId") AS "aggr_selection_1_Payment" ON ("public"."BookingGroup"."id" = "aggr_selection_1_Payment"."bookingGroupId") LEFT JOIN (SELECT "public"."Booking"."bookingGroupId", COUNT(*) AS "_aggr_count_bookings" FROM "public"."Booking" WHERE 1=1 GROUP BY "public"."Booking"."bookingGroupId") AS "aggr_selection_2_Booking" ON ("public"."BookingGroup"."id" = "aggr_selection_2_Booking"."bookingGroupId") WHERE ("public"."BookingGroup"."clubId" = $1 AND "public"."BookingGroup"."date" >= $2 AND "public"."BookingGroup"."date" < $3 AND "public"."BookingGroup"."status" <> CAST($4::text AS "public"."BookingStatus")) ORDER BY "public"."BookingGroup"."date" ASC, "public"."BookingGroup"."startTime" ASC OFFSET $5
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE "public"."Booking"."bookingGroupId" IN ($1) OFFSET $2
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."clubId" = $1 ORDER BY "public"."Court"."order" ASC OFFSET $2
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query COMMIT
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2) OFFSET $3
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingGroupId" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."slug", "public"."Club"."email", "public"."Club"."phone", "public"."Club"."address", "public"."Club"."city", "public"."Club"."state", "public"."Club"."postalCode", "public"."Club"."country", "public"."Club"."website", "public"."Club"."description", "public"."Club"."logo", "public"."Club"."active", "public"."Club"."status"::text FROM "public"."Club" WHERE ("public"."Club"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query COMMIT
prisma:query COMMIT
 GET /api/settings/club 200 in 2826ms
prisma:query DEALLOCATE ALL
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_SplitPayment", 0) AS "_aggr_count_SplitPayment", COALESCE("aggr_selection_1_Payment"."_aggr_count_Payment", 0) AS "_aggr_count_Payment" FROM "public"."Booking" LEFT JOIN (SELECT "public"."SplitPayment"."bookingId", COUNT(*) AS "_aggr_count_SplitPayment" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingId") AS "aggr_selection_0_SplitPayment" ON ("public"."Booking"."id" = "aggr_selection_0_SplitPayment"."bookingId") LEFT JOIN (SELECT "public"."Payment"."bookingId", COUNT(*) AS "_aggr_count_Payment" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingId") AS "aggr_selection_1_Payment" ON ("public"."Booking"."id" = "aggr_selection_1_Payment"."bookingId") WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."date" < $3 AND "public"."Booking"."status" <> CAST($4::text AS "public"."BookingStatus") AND "public"."Booking"."bookingGroupId" IS NULL) ORDER BY "public"."Booking"."date" ASC, "public"."Booking"."startTime" ASC OFFSET $5
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2) OFFSET $3
 ✓ Compiled /api/settings/payments in 204ms (2666 modules)
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
 GET /api/settings/courts 200 in 3334ms
prisma:query BEGIN
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query COMMIT
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Class"."id", "public"."Class"."clubId", "public"."Class"."courtId", "public"."Class"."name", "public"."Class"."description", "public"."Class"."instructorId", "public"."Class"."instructorName", "public"."Class"."level"::text, "public"."Class"."type"::text, "public"."Class"."maxStudents", "public"."Class"."enrolledCount", "public"."Class"."price", "public"."Class"."currency", "public"."Class"."date", "public"."Class"."startTime", "public"."Class"."endTime", "public"."Class"."duration", "public"."Class"."status"::text, "public"."Class"."recurring", "public"."Class"."recurringDays", "public"."Class"."notes", "public"."Class"."createdAt", "public"."Class"."updatedAt", "public"."Class"."cancelledAt", COALESCE("aggr_selection_0_ClassEnrollment"."_aggr_count_ClassEnrollment", 0) AS "_aggr_count_ClassEnrollment" FROM "public"."Class" LEFT JOIN (SELECT "public"."ClassEnrollment"."classId", COUNT(*) AS "_aggr_count_ClassEnrollment" FROM "public"."ClassEnrollment" WHERE 1=1 GROUP BY "public"."ClassEnrollment"."classId") AS "aggr_selection_0_ClassEnrollment" ON ("public"."Class"."id" = "aggr_selection_0_ClassEnrollment"."classId") WHERE ("public"."Class"."clubId" = $1 AND "public"."Class"."date" >= $2 AND "public"."Class"."date" < $3 AND "public"."Class"."status" <> CAST($4::text AS "public"."ClassStatus")) ORDER BY "public"."Class"."date" ASC, "public"."Class"."startTime" ASC OFFSET $5
prisma:query COMMIT
 GET /api/bookings?date=2025-09-24 200 in 3656ms
prisma:query BEGIN
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query COMMIT
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query SELECT "public"."PaymentProvider"."id", "public"."PaymentProvider"."clubId", "public"."PaymentProvider"."providerId", "public"."PaymentProvider"."name", "public"."PaymentProvider"."enabled", "public"."PaymentProvider"."config", "public"."PaymentProvider"."fees", "public"."PaymentProvider"."createdAt", "public"."PaymentProvider"."updatedAt" FROM "public"."PaymentProvider" WHERE "public"."PaymentProvider"."clubId" = $1 ORDER BY "public"."PaymentProvider"."createdAt" ASC OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query DEALLOCATE ALL
prisma:query COMMIT
prisma:query BEGIN
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."slug", "public"."Club"."email", "public"."Club"."phone", "public"."Club"."address", "public"."Club"."city", "public"."Club"."state", "public"."Club"."postalCode", "public"."Club"."country", "public"."Club"."website", "public"."Club"."description", "public"."Club"."logo", "public"."Club"."active", "public"."Club"."status"::text FROM "public"."Club" WHERE ("public"."Club"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
 GET /api/settings/payments 200 in 1965ms
prisma:query DEALLOCATE ALL
prisma:query COMMIT
 GET /api/settings/club 200 in 2043ms
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."clubId" = $1 ORDER BY "public"."Court"."order" ASC OFFSET $2
prisma:query COMMIT
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."timezone" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query BEGIN
prisma:query COMMIT
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query DEALLOCATE ALL
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query COMMIT
prisma:query COMMIT
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_splitPayments", 0) AS "_aggr_count_splitPayments", COALESCE("aggr_selection_1_Payment"."_aggr_count_payments", 0) AS "_aggr_count_payments", COALESCE("aggr_selection_2_Booking"."_aggr_count_bookings", 0) AS "_aggr_count_bookings" FROM "public"."BookingGroup" LEFT JOIN (SELECT "public"."SplitPayment"."bookingGroupId", COUNT(*) AS "_aggr_count_splitPayments" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingGroupId") AS "aggr_selection_0_SplitPayment" ON ("public"."BookingGroup"."id" = "aggr_selection_0_SplitPayment"."bookingGroupId") LEFT JOIN (SELECT "public"."Payment"."bookingGroupId", COUNT(*) AS "_aggr_count_payments" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingGroupId") AS "aggr_selection_1_Payment" ON ("public"."BookingGroup"."id" = "aggr_selection_1_Payment"."bookingGroupId") LEFT JOIN (SELECT "public"."Booking"."bookingGroupId", COUNT(*) AS "_aggr_count_bookings" FROM "public"."Booking" WHERE 1=1 GROUP BY "public"."Booking"."bookingGroupId") AS "aggr_selection_2_Booking" ON ("public"."BookingGroup"."id" = "aggr_selection_2_Booking"."bookingGroupId") WHERE ("public"."BookingGroup"."clubId" = $1 AND "public"."BookingGroup"."date" >= $2 AND "public"."BookingGroup"."date" < $3 AND "public"."BookingGroup"."status" <> CAST($4::text AS "public"."BookingStatus")) ORDER BY "public"."BookingGroup"."date" ASC, "public"."BookingGroup"."startTime" ASC OFFSET $5
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE "public"."Booking"."bookingGroupId" IN ($1) OFFSET $2
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2) OFFSET $3
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingGroupId" IN ($1) OFFSET $2
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
 GET /api/settings/courts 200 in 2518ms
prisma:query BEGIN
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query DEALLOCATE ALL
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_SplitPayment", 0) AS "_aggr_count_SplitPayment", COALESCE("aggr_selection_1_Payment"."_aggr_count_Payment", 0) AS "_aggr_count_Payment" FROM "public"."Booking" LEFT JOIN (SELECT "public"."SplitPayment"."bookingId", COUNT(*) AS "_aggr_count_SplitPayment" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingId") AS "aggr_selection_0_SplitPayment" ON ("public"."Booking"."id" = "aggr_selection_0_SplitPayment"."bookingId") LEFT JOIN (SELECT "public"."Payment"."bookingId", COUNT(*) AS "_aggr_count_Payment" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingId") AS "aggr_selection_1_Payment" ON ("public"."Booking"."id" = "aggr_selection_1_Payment"."bookingId") WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."date" < $3 AND "public"."Booking"."status" <> CAST($4::text AS "public"."BookingStatus") AND "public"."Booking"."bookingGroupId" IS NULL) ORDER BY "public"."Booking"."date" ASC, "public"."Booking"."startTime" ASC OFFSET $5
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingId" IN ($1,$2,$3) OFFSET $4
prisma:query BEGIN
prisma:query COMMIT
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."PaymentProvider"."id", "public"."PaymentProvider"."clubId", "public"."PaymentProvider"."providerId", "public"."PaymentProvider"."name", "public"."PaymentProvider"."enabled", "public"."PaymentProvider"."config", "public"."PaymentProvider"."fees", "public"."PaymentProvider"."createdAt", "public"."PaymentProvider"."updatedAt" FROM "public"."PaymentProvider" WHERE "public"."PaymentProvider"."clubId" = $1 ORDER BY "public"."PaymentProvider"."createdAt" ASC OFFSET $2
 GET /api/settings/payments 200 in 1791ms
prisma:query COMMIT
prisma:query SELECT "public"."Class"."id", "public"."Class"."clubId", "public"."Class"."courtId", "public"."Class"."name", "public"."Class"."description", "public"."Class"."instructorId", "public"."Class"."instructorName", "public"."Class"."level"::text, "public"."Class"."type"::text, "public"."Class"."maxStudents", "public"."Class"."enrolledCount", "public"."Class"."price", "public"."Class"."currency", "public"."Class"."date", "public"."Class"."startTime", "public"."Class"."endTime", "public"."Class"."duration", "public"."Class"."status"::text, "public"."Class"."recurring", "public"."Class"."recurringDays", "public"."Class"."notes", "public"."Class"."createdAt", "public"."Class"."updatedAt", "public"."Class"."cancelledAt", COALESCE("aggr_selection_0_ClassEnrollment"."_aggr_count_ClassEnrollment", 0) AS "_aggr_count_ClassEnrollment" FROM "public"."Class" LEFT JOIN (SELECT "public"."ClassEnrollment"."classId", COUNT(*) AS "_aggr_count_ClassEnrollment" FROM "public"."ClassEnrollment" WHERE 1=1 GROUP BY "public"."ClassEnrollment"."classId") AS "aggr_selection_0_ClassEnrollment" ON ("public"."Class"."id" = "aggr_selection_0_ClassEnrollment"."classId") WHERE ("public"."Class"."clubId" = $1 AND "public"."Class"."date" >= $2 AND "public"."Class"."date" < $3 AND "public"."Class"."status" <> CAST($4::text AS "public"."ClassStatus")) ORDER BY "public"."Class"."date" ASC, "public"."Class"."startTime" ASC OFFSET $5
prisma:query COMMIT
 GET /api/bookings?date=2025-09-24 200 in 3086ms
 ✓ Compiled /api/bookings/[id]/check-payment in 283ms (2668 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[Check Payment] Checking payment for booking: 7a9493bf-0972-4497-aa38-2ccad5145296
prisma:query BEGIN
 ○ Compiling /api/bookings/[id] ...
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND "public"."Booking"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE ("public"."Payment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."Payment"."bookingId" IN ($2)) ORDER BY "public"."Payment"."createdAt" DESC LIMIT $3 OFFSET $4
 ✓ Compiled /api/bookings/[id] in 882ms (2898 modules)
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE ("public"."SplitPayment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."SplitPayment"."bookingId" IN ($2)) OFFSET $3
prisma:query COMMIT
 GET /api/bookings/7a9493bf-0972-4497-aa38-2ccad5145296/check-payment 200 in 2416ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[Check Payment] Checking payment for booking: 7a9493bf-0972-4497-aa38-2ccad5145296
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND "public"."Booking"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
Error: Route "/api/bookings/[id]" used `params.id`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/bookings/[id]/route.ts:31:13)
  29 |     
  30 |     const session = await requireStaffAuth()
> 31 |     const { id } = params
     |             ^
  32 |
  33 |     const booking = await prisma.booking.findFirst({
  34 |       where: {
prisma:query COMMIT
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE ("public"."Payment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."Payment"."bookingId" IN ($2)) ORDER BY "public"."Payment"."createdAt" DESC LIMIT $3 OFFSET $4
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query BEGIN
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE ("public"."SplitPayment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."SplitPayment"."bookingId" IN ($2)) OFFSET $3
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query COMMIT
 GET /api/bookings/7a9493bf-0972-4497-aa38-2ccad5145296/check-payment 200 in 1763ms
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND "public"."Booking"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE "public"."SplitPayment"."bookingId" IN ($1) ORDER BY "public"."SplitPayment"."createdAt" ASC OFFSET $2
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."slug", "public"."Club"."email", "public"."Club"."phone", "public"."Club"."address", "public"."Club"."city", "public"."Club"."state", "public"."Club"."country", "public"."Club"."postalCode", "public"."Club"."website", "public"."Club"."logo", "public"."Club"."description", "public"."Club"."status"::text, "public"."Club"."active", "public"."Club"."stripeAccountId", "public"."Club"."stripeOnboardingCompleted", "public"."Club"."stripePayoutsEnabled", "public"."Club"."stripeChargesEnabled", "public"."Club"."stripeDetailsSubmitted", "public"."Club"."stripeRequirements", "public"."Club"."stripeCommissionRate", "public"."Club"."createdAt", "public"."Club"."updatedAt", "public"."Club"."approvedAt", "public"."Club"."approvedBy", "public"."Club"."whatsappNumber", "public"."Club"."initialSetupCompleted", "public"."Club"."initialSetupCompletedAt" FROM "public"."Club" WHERE "public"."Club"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE "public"."ClubSettings"."clubId" IN ($1) OFFSET $2
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."slug", "public"."Club"."email", "public"."Club"."phone", "public"."Club"."address", "public"."Club"."city", "public"."Club"."state", "public"."Club"."country", "public"."Club"."postalCode", "public"."Club"."website", "public"."Club"."logo", "public"."Club"."description", "public"."Club"."status"::text, "public"."Club"."active", "public"."Club"."stripeAccountId", "public"."Club"."stripeOnboardingCompleted", "public"."Club"."stripePayoutsEnabled", "public"."Club"."stripeChargesEnabled", "public"."Club"."stripeDetailsSubmitted", "public"."Club"."stripeRequirements", "public"."Club"."stripeCommissionRate", "public"."Club"."createdAt", "public"."Club"."updatedAt", "public"."Club"."approvedAt", "public"."Club"."approvedBy", "public"."Club"."whatsappNumber", "public"."Club"."initialSetupCompleted", "public"."Club"."initialSetupCompletedAt" FROM "public"."Club" WHERE "public"."Club"."id" IN ($1) OFFSET $2
prisma:query COMMIT
 GET /api/bookings/7a9493bf-0972-4497-aa38-2ccad5145296/split-payments 200 in 3388ms
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE "public"."SplitPayment"."bookingId" IN ($1) ORDER BY "public"."SplitPayment"."createdAt" ASC OFFSET $2
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE "public"."Payment"."bookingId" IN ($1) ORDER BY "public"."Payment"."createdAt" DESC OFFSET $2
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Notification"."id", "public"."Notification"."bookingId", "public"."Notification"."splitPaymentId", "public"."Notification"."type"::text, "public"."Notification"."template", "public"."Notification"."recipient", "public"."Notification"."status"::text, "public"."Notification"."twilioSid", "public"."Notification"."errorMessage", "public"."Notification"."createdAt", "public"."Notification"."updatedAt", "public"."Notification"."sentAt" FROM "public"."Notification" WHERE "public"."Notification"."bookingId" IN ($1) ORDER BY "public"."Notification"."createdAt" DESC OFFSET $2
prisma:query COMMIT
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
 GET /api/bookings/7a9493bf-0972-4497-aa38-2ccad5145296 200 in 3797ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query DEALLOCATE ALL
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
Error: Route "/api/bookings/[id]" used `params.id`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/bookings/[id]/route.ts:31:13)
  29 |     
  30 |     const session = await requireStaffAuth()
> 31 |     const { id } = params
     |             ^
  32 |
  33 |     const booking = await prisma.booking.findFirst({
  34 |       where: {
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE "public"."SplitPayment"."bookingId" IN ($1) ORDER BY "public"."SplitPayment"."createdAt" ASC OFFSET $2
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND "public"."Booking"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."slug", "public"."Club"."email", "public"."Club"."phone", "public"."Club"."address", "public"."Club"."city", "public"."Club"."state", "public"."Club"."country", "public"."Club"."postalCode", "public"."Club"."website", "public"."Club"."logo", "public"."Club"."description", "public"."Club"."status"::text, "public"."Club"."active", "public"."Club"."stripeAccountId", "public"."Club"."stripeOnboardingCompleted", "public"."Club"."stripePayoutsEnabled", "public"."Club"."stripeChargesEnabled", "public"."Club"."stripeDetailsSubmitted", "public"."Club"."stripeRequirements", "public"."Club"."stripeCommissionRate", "public"."Club"."createdAt", "public"."Club"."updatedAt", "public"."Club"."approvedAt", "public"."Club"."approvedBy", "public"."Club"."whatsappNumber", "public"."Club"."initialSetupCompleted", "public"."Club"."initialSetupCompletedAt" FROM "public"."Club" WHERE "public"."Club"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1) OFFSET $2
prisma:query COMMIT
 GET /api/bookings/7a9493bf-0972-4497-aa38-2ccad5145296/split-payments 200 in 1289ms
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."slug", "public"."Club"."email", "public"."Club"."phone", "public"."Club"."address", "public"."Club"."city", "public"."Club"."state", "public"."Club"."country", "public"."Club"."postalCode", "public"."Club"."website", "public"."Club"."logo", "public"."Club"."description", "public"."Club"."status"::text, "public"."Club"."active", "public"."Club"."stripeAccountId", "public"."Club"."stripeOnboardingCompleted", "public"."Club"."stripePayoutsEnabled", "public"."Club"."stripeChargesEnabled", "public"."Club"."stripeDetailsSubmitted", "public"."Club"."stripeRequirements", "public"."Club"."stripeCommissionRate", "public"."Club"."createdAt", "public"."Club"."updatedAt", "public"."Club"."approvedAt", "public"."Club"."approvedBy", "public"."Club"."whatsappNumber", "public"."Club"."initialSetupCompleted", "public"."Club"."initialSetupCompletedAt" FROM "public"."Club" WHERE "public"."Club"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE "public"."ClubSettings"."clubId" IN ($1) OFFSET $2
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE "public"."SplitPayment"."bookingId" IN ($1) ORDER BY "public"."SplitPayment"."createdAt" ASC OFFSET $2
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE "public"."Payment"."bookingId" IN ($1) ORDER BY "public"."Payment"."createdAt" DESC OFFSET $2
prisma:query SELECT "public"."Notification"."id", "public"."Notification"."bookingId", "public"."Notification"."splitPaymentId", "public"."Notification"."type"::text, "public"."Notification"."template", "public"."Notification"."recipient", "public"."Notification"."status"::text, "public"."Notification"."twilioSid", "public"."Notification"."errorMessage", "public"."Notification"."createdAt", "public"."Notification"."updatedAt", "public"."Notification"."sentAt" FROM "public"."Notification" WHERE "public"."Notification"."bookingId" IN ($1) ORDER BY "public"."Notification"."createdAt" DESC OFFSET $2
prisma:query COMMIT
 GET /api/bookings/7a9493bf-0972-4497-aa38-2ccad5145296 200 in 1699ms
 ○ Compiling /api/club/schedule ...
 ✓ Compiled /api/club/schedule in 503ms (2894 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Schedule"."id", "public"."Schedule"."clubId", "public"."Schedule"."dayOfWeek", "public"."Schedule"."openTime", "public"."Schedule"."closeTime", "public"."Schedule"."createdAt", "public"."Schedule"."updatedAt" FROM "public"."Schedule" WHERE ("public"."Schedule"."clubId" = $1 AND "public"."Schedule"."dayOfWeek" = $2) ORDER BY "public"."Schedule"."dayOfWeek" ASC OFFSET $3
prisma:query COMMIT
 GET /api/club/schedule?dayOfWeek=2 200 in 1972ms
 ✓ Compiled /api/bookings/availability in 472ms (2897 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."playerName" FROM "public"."Booking" WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."courtId" = $2 AND "public"."Booking"."date" >= $3 AND "public"."Booking"."date" < $4 AND "public"."Booking"."status" <> CAST($5::text AS "public"."BookingStatus")) ORDER BY "public"."Booking"."startTime" ASC OFFSET $6
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."ScheduleRule"."id", "public"."ScheduleRule"."clubId", "public"."ScheduleRule"."name", "public"."ScheduleRule"."dayOfWeek", "public"."ScheduleRule"."startTime", "public"."ScheduleRule"."endTime", "public"."ScheduleRule"."enabled", "public"."ScheduleRule"."createdAt", "public"."ScheduleRule"."updatedAt" FROM "public"."ScheduleRule" WHERE ("public"."ScheduleRule"."clubId" = $1 AND "public"."ScheduleRule"."dayOfWeek" = $2 AND "public"."ScheduleRule"."enabled" = $3) LIMIT $4 OFFSET $5
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
Schedule rule for day 3 : {
  id: 'schedule_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_3_1758658658682',
  clubId: '90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d',
  name: 'Horario Miércoles',
  dayOfWeek: 3,
  startTime: '07:00',
  endTime: '23:00',
  enabled: true,
  createdAt: 2025-09-23T20:17:38.682Z,
  updatedAt: 2025-09-23T20:17:38.682Z
}
=== AVAILABILITY API DEBUG ===
Date received: 2025-09-24
CourtId: court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657368282_mm534w3iw
Duration: 90
Timezone: America/Mexico_City
All slots generated: 30
Slot 07:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 07:00
Slot 07:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 07:30
Slot 08:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 08:00
Slot 08:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 08:30
Slot 09:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 09:00
Slot 09:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 10:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 10:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 11:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 11:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 12:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 12:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 13:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 13:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 14:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 14:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 15:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 15:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 16:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 16:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 19:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 20:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 20:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 21:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 21:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
 GET /api/bookings/availability?date=2025-09-24&courtId=court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657368282_mm534w3iw&duration=90 200 in 3191ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query COMMIT
prisma:query BEGIN
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query DEALLOCATE ALL
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."playerName" FROM "public"."Booking" WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."courtId" = $2 AND "public"."Booking"."date" >= $3 AND "public"."Booking"."date" < $4 AND "public"."Booking"."status" <> CAST($5::text AS "public"."BookingStatus")) ORDER BY "public"."Booking"."startTime" ASC OFFSET $6
prisma:query DEALLOCATE ALL
prisma:query COMMIT
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."playerName" FROM "public"."Booking" WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."courtId" = $2 AND "public"."Booking"."date" >= $3 AND "public"."Booking"."date" < $4 AND "public"."Booking"."status" <> CAST($5::text AS "public"."BookingStatus")) ORDER BY "public"."Booking"."startTime" ASC OFFSET $6
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."playerName" FROM "public"."Booking" WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."courtId" = $2 AND "public"."Booking"."date" >= $3 AND "public"."Booking"."date" < $4 AND "public"."Booking"."status" <> CAST($5::text AS "public"."BookingStatus")) ORDER BY "public"."Booking"."startTime" ASC OFFSET $6
prisma:query COMMIT
prisma:query BEGIN
prisma:query COMMIT
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ScheduleRule"."id", "public"."ScheduleRule"."clubId", "public"."ScheduleRule"."name", "public"."ScheduleRule"."dayOfWeek", "public"."ScheduleRule"."startTime", "public"."ScheduleRule"."endTime", "public"."ScheduleRule"."enabled", "public"."ScheduleRule"."createdAt", "public"."ScheduleRule"."updatedAt" FROM "public"."ScheduleRule" WHERE ("public"."ScheduleRule"."clubId" = $1 AND "public"."ScheduleRule"."dayOfWeek" = $2 AND "public"."ScheduleRule"."enabled" = $3) LIMIT $4 OFFSET $5
prisma:query COMMIT
prisma:query SELECT "public"."ScheduleRule"."id", "public"."ScheduleRule"."clubId", "public"."ScheduleRule"."name", "public"."ScheduleRule"."dayOfWeek", "public"."ScheduleRule"."startTime", "public"."ScheduleRule"."endTime", "public"."ScheduleRule"."enabled", "public"."ScheduleRule"."createdAt", "public"."ScheduleRule"."updatedAt" FROM "public"."ScheduleRule" WHERE ("public"."ScheduleRule"."clubId" = $1 AND "public"."ScheduleRule"."dayOfWeek" = $2 AND "public"."ScheduleRule"."enabled" = $3) LIMIT $4 OFFSET $5
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."playerName" FROM "public"."Booking" WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."courtId" = $2 AND "public"."Booking"."date" >= $3 AND "public"."Booking"."date" < $4 AND "public"."Booking"."status" <> CAST($5::text AS "public"."BookingStatus")) ORDER BY "public"."Booking"."startTime" ASC OFFSET $6
prisma:query SELECT "public"."ScheduleRule"."id", "public"."ScheduleRule"."clubId", "public"."ScheduleRule"."name", "public"."ScheduleRule"."dayOfWeek", "public"."ScheduleRule"."startTime", "public"."ScheduleRule"."endTime", "public"."ScheduleRule"."enabled", "public"."ScheduleRule"."createdAt", "public"."ScheduleRule"."updatedAt" FROM "public"."ScheduleRule" WHERE ("public"."ScheduleRule"."clubId" = $1 AND "public"."ScheduleRule"."dayOfWeek" = $2 AND "public"."ScheduleRule"."enabled" = $3) LIMIT $4 OFFSET $5
Schedule rule for day 3 : {
  id: 'schedule_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_3_1758658658682',
  clubId: '90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d',
  name: 'Horario Miércoles',
  dayOfWeek: 3,
  startTime: '07:00',
  endTime: '23:00',
  enabled: true,
  createdAt: 2025-09-23T20:17:38.682Z,
  updatedAt: 2025-09-23T20:17:38.682Z
}
=== AVAILABILITY API DEBUG ===
Date received: 2025-09-24
CourtId: court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657382195_2779lj72j
Duration: 90
Timezone: America/Mexico_City
All slots generated: 30
Slot 07:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 07:00
Slot 07:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 07:30
Slot 08:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 08:00
Slot 08:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 08:30
Slot 09:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 09:00
Slot 09:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 10:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 10:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 11:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 11:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 12:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 12:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 13:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 13:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 14:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 14:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 15:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 15:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 16:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 16:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 17:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 17:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 18:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 18:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 19:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 19:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 20:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 20:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 21:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 21:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
 GET /api/bookings/availability?date=2025-09-24&courtId=court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657382195_2779lj72j&duration=90 200 in 2627ms
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
Schedule rule for day 3 : {
  id: 'schedule_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_3_1758658658682',
  clubId: '90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d',
  name: 'Horario Miércoles',
  dayOfWeek: 3,
  startTime: '07:00',
  endTime: '23:00',
  enabled: true,
  createdAt: 2025-09-23T20:17:38.682Z,
  updatedAt: 2025-09-23T20:17:38.682Z
}
=== AVAILABILITY API DEBUG ===
Date received: 2025-09-24
CourtId: court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657376650_k1kec7a4m
Duration: 90
Timezone: America/Mexico_City
All slots generated: 30
Slot 07:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 07:00
Slot 07:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 07:30
Slot 08:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 08:00
Slot 08:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 08:30
Slot 09:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 09:00
Slot 09:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 10:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 10:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 11:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 11:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 12:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 12:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 13:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 13:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 14:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 14:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 17:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 18:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 18:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 19:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 19:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 20:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 20:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 21:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 21:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
 GET /api/bookings/availability?date=2025-09-24&courtId=court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657376650_k1kec7a4m&duration=90 200 in 2689ms
Schedule rule for day 3 : {
  id: 'schedule_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_3_1758658658682',
  clubId: '90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d',
  name: 'Horario Miércoles',
  dayOfWeek: 3,
  startTime: '07:00',
  endTime: '23:00',
  enabled: true,
  createdAt: 2025-09-23T20:17:38.682Z,
  updatedAt: 2025-09-23T20:17:38.682Z
}
=== AVAILABILITY API DEBUG ===
Date received: 2025-09-24
CourtId: court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657359963_64oe5n8m0
Duration: 90
Timezone: America/Mexico_City
All slots generated: 30
Slot 07:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 07:00
Slot 07:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 07:30
Slot 08:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 08:00
Slot 08:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 08:30
Slot 09:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 09:00
Slot 09:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 10:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 10:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 11:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 11:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 12:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 12:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 17:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 18:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 18:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 19:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 19:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 20:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 20:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 21:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 21:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
 GET /api/bookings/availability?date=2025-09-24&courtId=court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657359963_64oe5n8m0&duration=90 200 in 2696ms
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ScheduleRule"."id", "public"."ScheduleRule"."clubId", "public"."ScheduleRule"."name", "public"."ScheduleRule"."dayOfWeek", "public"."ScheduleRule"."startTime", "public"."ScheduleRule"."endTime", "public"."ScheduleRule"."enabled", "public"."ScheduleRule"."createdAt", "public"."ScheduleRule"."updatedAt" FROM "public"."ScheduleRule" WHERE ("public"."ScheduleRule"."clubId" = $1 AND "public"."ScheduleRule"."dayOfWeek" = $2 AND "public"."ScheduleRule"."enabled" = $3) LIMIT $4 OFFSET $5
prisma:query COMMIT
Schedule rule for day 3 : {
  id: 'schedule_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_3_1758658658682',
  clubId: '90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d',
  name: 'Horario Miércoles',
  dayOfWeek: 3,
  startTime: '07:00',
  endTime: '23:00',
  enabled: true,
  createdAt: 2025-09-23T20:17:38.682Z,
  updatedAt: 2025-09-23T20:17:38.682Z
}
=== AVAILABILITY API DEBUG ===
Date received: 2025-09-24
CourtId: court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657368282_mm534w3iw
Duration: 90
Timezone: America/Mexico_City
All slots generated: 30
Slot 07:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 07:00
Slot 07:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 07:30
Slot 08:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 08:00
Slot 08:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 08:30
Slot 09:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 09:00
Slot 09:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 10:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 10:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 11:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 11:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 12:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 12:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 13:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 13:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 14:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 14:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 15:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 15:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 16:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 16:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 19:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 20:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 20:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 21:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 21:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
 GET /api/bookings/availability?date=2025-09-24&courtId=court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657368282_mm534w3iw&duration=90 200 in 1805ms
 ✓ Compiled /api/pricing/calculate in 311ms (2899 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Pricing"."id", "public"."Pricing"."clubId", "public"."Pricing"."dayOfWeek", "public"."Pricing"."startTime", "public"."Pricing"."endTime", "public"."Pricing"."price", "public"."Pricing"."createdAt", "public"."Pricing"."updatedAt" FROM "public"."Pricing" WHERE ("public"."Pricing"."clubId" = $1 AND ("public"."Pricing"."dayOfWeek" = $2 OR "public"."Pricing"."dayOfWeek" IS NULL) AND "public"."Pricing"."startTime" <= $3 AND "public"."Pricing"."endTime" > $4) ORDER BY "public"."Pricing"."dayOfWeek" DESC, "public"."Pricing"."price" DESC, "public"."Pricing"."createdAt" DESC LIMIT $5 OFFSET $6
prisma:query COMMIT
 POST /api/pricing/calculate 200 in 2101ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query COMMIT
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query DEALLOCATE ALL
prisma:query COMMIT
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query BEGIN
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."playerName" FROM "public"."Booking" WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."courtId" = $2 AND "public"."Booking"."date" >= $3 AND "public"."Booking"."date" < $4 AND "public"."Booking"."status" <> CAST($5::text AS "public"."BookingStatus")) ORDER BY "public"."Booking"."startTime" ASC OFFSET $6
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query COMMIT
prisma:query BEGIN
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query COMMIT
prisma:query COMMIT
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ScheduleRule"."id", "public"."ScheduleRule"."clubId", "public"."ScheduleRule"."name", "public"."ScheduleRule"."dayOfWeek", "public"."ScheduleRule"."startTime", "public"."ScheduleRule"."endTime", "public"."ScheduleRule"."enabled", "public"."ScheduleRule"."createdAt", "public"."ScheduleRule"."updatedAt" FROM "public"."ScheduleRule" WHERE ("public"."ScheduleRule"."clubId" = $1 AND "public"."ScheduleRule"."dayOfWeek" = $2 AND "public"."ScheduleRule"."enabled" = $3) LIMIT $4 OFFSET $5
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query DEALLOCATE ALL
prisma:query COMMIT
Schedule rule for day 3 : {
  id: 'schedule_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_3_1758658658682',
  clubId: '90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d',
  name: 'Horario Miércoles',
  dayOfWeek: 3,
  startTime: '07:00',
  endTime: '23:00',
  enabled: true,
  createdAt: 2025-09-23T20:17:38.682Z,
  updatedAt: 2025-09-23T20:17:38.682Z
}
=== AVAILABILITY API DEBUG ===
Date received: 2025-09-24
CourtId: court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657359963_64oe5n8m0
Duration: 90
Timezone: America/Mexico_City
All slots generated: 30
Slot 07:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 07:00
Slot 07:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 07:30
Slot 08:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 08:00
Slot 08:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 08:30
Slot 09:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 09:00
Slot 09:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 10:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 10:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 11:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 11:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 12:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 12:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 17:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 18:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 18:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 19:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 19:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 20:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 20:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 21:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 21:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
 GET /api/bookings/availability?date=2025-09-24&courtId=court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657359963_64oe5n8m0&duration=90 200 in 1947ms
prisma:query COMMIT
prisma:query BEGIN
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."playerName" FROM "public"."Booking" WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."courtId" = $2 AND "public"."Booking"."date" >= $3 AND "public"."Booking"."date" < $4 AND "public"."Booking"."status" <> CAST($5::text AS "public"."BookingStatus")) ORDER BY "public"."Booking"."startTime" ASC OFFSET $6
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."playerName" FROM "public"."Booking" WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."courtId" = $2 AND "public"."Booking"."date" >= $3 AND "public"."Booking"."date" < $4 AND "public"."Booking"."status" <> CAST($5::text AS "public"."BookingStatus")) ORDER BY "public"."Booking"."startTime" ASC OFFSET $6
prisma:query COMMIT
prisma:query COMMIT
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."playerName" FROM "public"."Booking" WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."courtId" = $2 AND "public"."Booking"."date" >= $3 AND "public"."Booking"."date" < $4 AND "public"."Booking"."status" <> CAST($5::text AS "public"."BookingStatus")) ORDER BY "public"."Booking"."startTime" ASC OFFSET $6
prisma:query COMMIT
prisma:query SELECT "public"."ScheduleRule"."id", "public"."ScheduleRule"."clubId", "public"."ScheduleRule"."name", "public"."ScheduleRule"."dayOfWeek", "public"."ScheduleRule"."startTime", "public"."ScheduleRule"."endTime", "public"."ScheduleRule"."enabled", "public"."ScheduleRule"."createdAt", "public"."ScheduleRule"."updatedAt" FROM "public"."ScheduleRule" WHERE ("public"."ScheduleRule"."clubId" = $1 AND "public"."ScheduleRule"."dayOfWeek" = $2 AND "public"."ScheduleRule"."enabled" = $3) LIMIT $4 OFFSET $5
prisma:query SELECT "public"."ScheduleRule"."id", "public"."ScheduleRule"."clubId", "public"."ScheduleRule"."name", "public"."ScheduleRule"."dayOfWeek", "public"."ScheduleRule"."startTime", "public"."ScheduleRule"."endTime", "public"."ScheduleRule"."enabled", "public"."ScheduleRule"."createdAt", "public"."ScheduleRule"."updatedAt" FROM "public"."ScheduleRule" WHERE ("public"."ScheduleRule"."clubId" = $1 AND "public"."ScheduleRule"."dayOfWeek" = $2 AND "public"."ScheduleRule"."enabled" = $3) LIMIT $4 OFFSET $5
prisma:query BEGIN
prisma:query COMMIT
Schedule rule for day 3 : {
  id: 'schedule_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_3_1758658658682',
  clubId: '90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d',
  name: 'Horario Miércoles',
  dayOfWeek: 3,
  startTime: '07:00',
  endTime: '23:00',
  enabled: true,
  createdAt: 2025-09-23T20:17:38.682Z,
  updatedAt: 2025-09-23T20:17:38.682Z
}
=== AVAILABILITY API DEBUG ===
Date received: 2025-09-24
CourtId: court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657376650_k1kec7a4m
Duration: 90
Timezone: America/Mexico_City
All slots generated: 30
Slot 07:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 07:00
Slot 07:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 07:30
Slot 08:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 08:00
Slot 08:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 08:30
Slot 09:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 09:00
Slot 09:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 10:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 10:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 11:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 11:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 12:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 12:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 13:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 13:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 14:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 14:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 17:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 18:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 18:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 19:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 19:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 20:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 20:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 21:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 21:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
 GET /api/bookings/availability?date=2025-09-24&courtId=court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657376650_k1kec7a4m&duration=90 200 in 2600ms
prisma:query DEALLOCATE ALL
prisma:query COMMIT
Schedule rule for day 3 : {
  id: 'schedule_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_3_1758658658682',
  clubId: '90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d',
  name: 'Horario Miércoles',
  dayOfWeek: 3,
  startTime: '07:00',
  endTime: '23:00',
  enabled: true,
  createdAt: 2025-09-23T20:17:38.682Z,
  updatedAt: 2025-09-23T20:17:38.682Z
}
=== AVAILABILITY API DEBUG ===
Date received: 2025-09-24
CourtId: court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657368282_mm534w3iw
Duration: 90
Timezone: America/Mexico_City
All slots generated: 30
Slot 07:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 07:00
Slot 07:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 07:30
Slot 08:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 08:00
Slot 08:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 08:30
Slot 09:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 09:00
Slot 09:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 10:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 10:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 11:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 11:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 12:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 12:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 13:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 13:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 14:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 14:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 15:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 15:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 16:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 16:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 19:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 20:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 20:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 21:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 21:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
 GET /api/bookings/availability?date=2025-09-24&courtId=court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657368282_mm534w3iw&duration=90 200 in 2629ms
prisma:query SELECT "public"."ScheduleRule"."id", "public"."ScheduleRule"."clubId", "public"."ScheduleRule"."name", "public"."ScheduleRule"."dayOfWeek", "public"."ScheduleRule"."startTime", "public"."ScheduleRule"."endTime", "public"."ScheduleRule"."enabled", "public"."ScheduleRule"."createdAt", "public"."ScheduleRule"."updatedAt" FROM "public"."ScheduleRule" WHERE ("public"."ScheduleRule"."clubId" = $1 AND "public"."ScheduleRule"."dayOfWeek" = $2 AND "public"."ScheduleRule"."enabled" = $3) LIMIT $4 OFFSET $5
prisma:query COMMIT
Schedule rule for day 3 : {
  id: 'schedule_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_3_1758658658682',
  clubId: '90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d',
  name: 'Horario Miércoles',
  dayOfWeek: 3,
  startTime: '07:00',
  endTime: '23:00',
  enabled: true,
  createdAt: 2025-09-23T20:17:38.682Z,
  updatedAt: 2025-09-23T20:17:38.682Z
}
=== AVAILABILITY API DEBUG ===
Date received: 2025-09-24
CourtId: court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657382195_2779lj72j
Duration: 90
Timezone: America/Mexico_City
All slots generated: 30
Slot 07:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 07:00
Slot 07:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 07:30
Slot 08:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 08:00
Slot 08:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 08:30
Slot 09:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
❌ FILTERING OUT past slot: 09:00
Slot 09:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 10:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 10:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 11:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 11:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 12:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 12:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 13:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 13:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 14:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 14:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 15:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 15:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 16:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 16:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 17:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 17:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 18:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 18:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 19:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 19:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 20:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 20:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 21:00: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
Slot 21:30: bookingDate=Wed Sep 24 2025, nowInClubTz=Wed Sep 24 2025, isToday=true
 GET /api/bookings/availability?date=2025-09-24&courtId=court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657382195_2779lj72j&duration=90 200 in 2827ms
 ✓ Compiled /api/players/search in 257ms (2577 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
🔍 Player search DEBUG:
   Session clubId: 90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d
   Phone search: 5549125610
   Searching with:
     clubId: 90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d
     cleanPhone: 5549125610
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Player"."id", "public"."Player"."name", "public"."Player"."email", "public"."Player"."phone", "public"."Player"."memberNumber" FROM "public"."Player" WHERE ("public"."Player"."clubId" = $1 AND ("public"."Player"."phone" = $2 OR "public"."Player"."phone" = $3) AND "public"."Player"."active" = $4) LIMIT $5 OFFSET $6
prisma:query COMMIT
   Player found: Jaime Alcázar  (5549125610)
 GET /api/players/search?phone=5549125610 200 in 1842ms
 ✓ Compiled /api/booking-groups in 411ms (2672 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
📝 BookingGroup request body: {
  name: 'Reserva grupal',
  type: 'MULTI_COURT',
  courtIds: [
    'court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657359963_64oe5n8m0',
    'court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657368282_mm534w3iw'
  ],
  multiCourtCount: 2,
  date: '2025-09-24',
  startTime: '09:30',
  duration: 90,
  playerName: 'Jaime Alcázar ',
  playerEmail: 'jaime@padelyzer.com',
  playerPhone: '5549125610',
  totalPlayers: 8,
  playersPerCourt: 4,
  splitPaymentEnabled: true,
  splitPaymentCount: 4,
  notes: '',
  paymentMethod: 'onsite',
  paymentType: 'cash'
}
✅ BookingGroup validated data: {
  name: 'Reserva grupal',
  type: 'MULTI_COURT',
  courtIds: [
    'court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657359963_64oe5n8m0',
    'court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657368282_mm534w3iw'
  ],
  multiCourtCount: 2,
  date: '2025-09-24',
  startTime: '09:30',
  duration: 90,
  playerName: 'Jaime Alcázar ',
  playerEmail: 'jaime@padelyzer.com',
  playerPhone: '5549125610',
  totalPlayers: 8,
  splitPaymentEnabled: true,
  splitPaymentCount: 4,
  playersPerCourt: 4,
  notes: '',
  paymentMethod: 'onsite',
  paymentType: 'cash'
}
🏓 Creating BookingGroup with data: {
  name: 'Reserva grupal',
  type: 'MULTI_COURT',
  courts: [
    'court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657359963_64oe5n8m0',
    'court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657368282_mm534w3iw'
  ],
  date: '2025-09-24',
  time: '09:30',
  duration: 90
}
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
🔍 Checking availability for courts: [
  'court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657359963_64oe5n8m0',
  'court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657368282_mm534w3iw'
]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."courtId" = $2 AND "public"."Booking"."date" >= $3 AND "public"."Booking"."date" < $4 AND "public"."Booking"."status" <> CAST($5::text AS "public"."BookingStatus") AND (("public"."Booking"."startTime" <= $6 AND "public"."Booking"."endTime" > $7) OR ("public"."Booking"."startTime" < $8 AND "public"."Booking"."endTime" >= $9) OR ("public"."Booking"."startTime" >= $10 AND "public"."Booking"."endTime" <= $11))) OFFSET $12
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."courtId" = $2 AND "public"."Booking"."date" >= $3 AND "public"."Booking"."date" < $4 AND "public"."Booking"."status" <> CAST($5::text AS "public"."BookingStatus") AND (("public"."Booking"."startTime" <= $6 AND "public"."Booking"."endTime" > $7) OR ("public"."Booking"."startTime" < $8 AND "public"."Booking"."endTime" >= $9) OR ("public"."Booking"."startTime" >= $10 AND "public"."Booking"."endTime" <= $11))) OFFSET $12
prisma:query COMMIT
✅ All courts available, proceeding with booking group creation
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Pricing"."id", "public"."Pricing"."clubId", "public"."Pricing"."dayOfWeek", "public"."Pricing"."startTime", "public"."Pricing"."endTime", "public"."Pricing"."price", "public"."Pricing"."createdAt", "public"."Pricing"."updatedAt" FROM "public"."Pricing" WHERE ("public"."Pricing"."clubId" = $1 AND ("public"."Pricing"."dayOfWeek" IS NULL OR "public"."Pricing"."dayOfWeek" = $2) AND "public"."Pricing"."startTime" <= $3 AND "public"."Pricing"."endTime" > $4) ORDER BY "public"."Pricing"."dayOfWeek" DESC, "public"."Pricing"."createdAt" DESC LIMIT $5 OFFSET $6
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Pricing"."id", "public"."Pricing"."clubId", "public"."Pricing"."dayOfWeek", "public"."Pricing"."startTime", "public"."Pricing"."endTime", "public"."Pricing"."price", "public"."Pricing"."createdAt", "public"."Pricing"."updatedAt" FROM "public"."Pricing" WHERE ("public"."Pricing"."clubId" = $1 AND ("public"."Pricing"."dayOfWeek" IS NULL OR "public"."Pricing"."dayOfWeek" = $2) AND "public"."Pricing"."startTime" <= $3 AND "public"."Pricing"."endTime" > $4) ORDER BY "public"."Pricing"."dayOfWeek" DESC, "public"."Pricing"."createdAt" DESC LIMIT $5 OFFSET $6
prisma:query COMMIT
💰 Pricing calculated: {
  courtPrices: {
    'court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657359963_64oe5n8m0': 75000,
    'court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657368282_mm534w3iw': 75000
  },
  totalPrice: 150000
}
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query INSERT INTO "public"."BookingGroup" ("id","clubId","date","startTime","endTime","duration","playerName","playerEmail","playerPhone","totalPlayers","price","currency","status","splitPaymentEnabled","splitPaymentCount","notes","createdAt","updatedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,CAST($13::text AS "public"."BookingStatus"),$14,$15,$16,$17,$18) RETURNING "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt"
📝 Created BookingGroup: 0c957240-66bb-4154-bead-b27bf94e30f9
prisma:query INSERT INTO "public"."Booking" ("id","clubId","courtId","date","startTime","endTime","duration","playerName","playerEmail","playerPhone","totalPlayers","price","currency","paymentStatus","paymentType","status","checkedIn","splitPaymentEnabled","splitPaymentCount","createdAt","updatedAt","bookingGroupId") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,CAST($14::text AS "public"."PaymentStatus"),CAST($15::text AS "public"."PaymentType"),CAST($16::text AS "public"."BookingStatus"),$17,$18,$19,$20,$21,$22) RETURNING "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId"
🏓 Created individual booking for court court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657359963_64oe5n8m0: 4e3729b0-9ddb-4323-8121-88cfddaf56c2
prisma:query INSERT INTO "public"."Booking" ("id","clubId","courtId","date","startTime","endTime","duration","playerName","playerEmail","playerPhone","totalPlayers","price","currency","paymentStatus","paymentType","status","checkedIn","splitPaymentEnabled","splitPaymentCount","createdAt","updatedAt","bookingGroupId") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,CAST($14::text AS "public"."PaymentStatus"),CAST($15::text AS "public"."PaymentType"),CAST($16::text AS "public"."BookingStatus"),$17,$18,$19,$20,$21,$22) RETURNING "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId"
🏓 Created individual booking for court court_90e75af6-4ef5-49bf-adb3-a6f2a78e2e8d_1758657368282_mm534w3iw: 3534000a-e1d6-4263-8612-878c3701de5b
prisma:query INSERT INTO "public"."SplitPayment" ("id","playerName","playerEmail","playerPhone","amount","status","createdAt","updatedAt","bookingGroupId") VALUES ($1,$2,$3,$4,$5,CAST($6::text AS "public"."PaymentStatus"),$7,$8,$9) RETURNING "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt"
prisma:query INSERT INTO "public"."SplitPayment" ("id","playerName","playerEmail","playerPhone","amount","status","createdAt","updatedAt","bookingGroupId") VALUES ($1,$2,$3,$4,$5,CAST($6::text AS "public"."PaymentStatus"),$7,$8,$9) RETURNING "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt"
prisma:query INSERT INTO "public"."SplitPayment" ("id","playerName","playerEmail","playerPhone","amount","status","createdAt","updatedAt","bookingGroupId") VALUES ($1,$2,$3,$4,$5,CAST($6::text AS "public"."PaymentStatus"),$7,$8,$9) RETURNING "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt"
prisma:query INSERT INTO "public"."SplitPayment" ("id","playerName","playerEmail","playerPhone","amount","status","createdAt","updatedAt","bookingGroupId") VALUES ($1,$2,$3,$4,$5,CAST($6::text AS "public"."PaymentStatus"),$7,$8,$9) RETURNING "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt"
💸 Created 4 split payment records for group 0c957240-66bb-4154-bead-b27bf94e30f9
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Player"."id", "public"."Player"."clubId", "public"."Player"."name", "public"."Player"."email", "public"."Player"."phone", "public"."Player"."phoneVerified", "public"."Player"."birthDate", "public"."Player"."level", "public"."Player"."preferredPosition", "public"."Player"."notes", "public"."Player"."avatar", "public"."Player"."active", "public"."Player"."memberNumber", "public"."Player"."memberSince", "public"."Player"."totalBookings", "public"."Player"."totalSpent", "public"."Player"."lastBookingAt", "public"."Player"."createdAt", "public"."Player"."updatedAt", "public"."Player"."gender" FROM "public"."Player" WHERE ("public"."Player"."clubId" = $1 AND "public"."Player"."phone" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query UPDATE "public"."Player" SET "totalBookings" = ("public"."Player"."totalBookings" + $1), "totalSpent" = ("public"."Player"."totalSpent" + $2), "lastBookingAt" = $3 WHERE ("public"."Player"."id" = $4 AND 1=1) RETURNING "public"."Player"."id", "public"."Player"."clubId", "public"."Player"."name", "public"."Player"."email", "public"."Player"."phone", "public"."Player"."phoneVerified", "public"."Player"."birthDate", "public"."Player"."level", "public"."Player"."preferredPosition", "public"."Player"."notes", "public"."Player"."avatar", "public"."Player"."active", "public"."Player"."memberNumber", "public"."Player"."memberSince", "public"."Player"."totalBookings", "public"."Player"."totalSpent", "public"."Player"."lastBookingAt", "public"."Player"."createdAt", "public"."Player"."updatedAt", "public"."Player"."gender"
prisma:query COMMIT
📊 Updated player statistics for Jaime Alcázar 
🎉 BookingGroup created successfully!
 POST /api/booking-groups 200 in 5401ms
 ✓ Compiled /api/bookings/[id]/check-payment in 192ms (1689 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[Check Payment] Checking payment for booking: 7a9493bf-0972-4497-aa38-2ccad5145296
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND "public"."Booking"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE ("public"."Payment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."Payment"."bookingId" IN ($2)) ORDER BY "public"."Payment"."createdAt" DESC LIMIT $3 OFFSET $4
 ✓ Compiled /api/bookings/[id] in 189ms (1899 modules)
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE ("public"."SplitPayment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."SplitPayment"."bookingId" IN ($2)) OFFSET $3
prisma:query COMMIT
 GET /api/bookings/7a9493bf-0972-4497-aa38-2ccad5145296/check-payment 200 in 2070ms
 ✓ Compiled in 1ms (1901 modules)
 ✓ Compiled in 0ms (1901 modules)
 ✓ Compiled in 1ms (1901 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
Error: Route "/api/bookings/[id]" used `params.id`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/bookings/[id]/route.ts:31:13)
  29 |     
  30 |     const session = await requireStaffAuth()
> 31 |     const { id } = params
     |             ^
  32 |
  33 |     const booking = await prisma.booking.findFirst({
  34 |       where: {
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND "public"."Booking"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[Check Payment] Checking payment for booking: 7a9493bf-0972-4497-aa38-2ccad5145296
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."slug", "public"."Club"."email", "public"."Club"."phone", "public"."Club"."address", "public"."Club"."city", "public"."Club"."state", "public"."Club"."country", "public"."Club"."postalCode", "public"."Club"."website", "public"."Club"."logo", "public"."Club"."description", "public"."Club"."status"::text, "public"."Club"."active", "public"."Club"."stripeAccountId", "public"."Club"."stripeOnboardingCompleted", "public"."Club"."stripePayoutsEnabled", "public"."Club"."stripeChargesEnabled", "public"."Club"."stripeDetailsSubmitted", "public"."Club"."stripeRequirements", "public"."Club"."stripeCommissionRate", "public"."Club"."createdAt", "public"."Club"."updatedAt", "public"."Club"."approvedAt", "public"."Club"."approvedBy", "public"."Club"."whatsappNumber", "public"."Club"."initialSetupCompleted", "public"."Club"."initialSetupCompletedAt" FROM "public"."Club" WHERE "public"."Club"."id" IN ($1) OFFSET $2
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE "public"."SplitPayment"."bookingId" IN ($1) ORDER BY "public"."SplitPayment"."createdAt" ASC OFFSET $2
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE "public"."ClubSettings"."clubId" IN ($1) OFFSET $2
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND "public"."Booking"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE "public"."SplitPayment"."bookingId" IN ($1) ORDER BY "public"."SplitPayment"."createdAt" ASC OFFSET $2
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE ("public"."Payment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."Payment"."bookingId" IN ($2)) ORDER BY "public"."Payment"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."slug", "public"."Club"."email", "public"."Club"."phone", "public"."Club"."address", "public"."Club"."city", "public"."Club"."state", "public"."Club"."country", "public"."Club"."postalCode", "public"."Club"."website", "public"."Club"."logo", "public"."Club"."description", "public"."Club"."status"::text, "public"."Club"."active", "public"."Club"."stripeAccountId", "public"."Club"."stripeOnboardingCompleted", "public"."Club"."stripePayoutsEnabled", "public"."Club"."stripeChargesEnabled", "public"."Club"."stripeDetailsSubmitted", "public"."Club"."stripeRequirements", "public"."Club"."stripeCommissionRate", "public"."Club"."createdAt", "public"."Club"."updatedAt", "public"."Club"."approvedAt", "public"."Club"."approvedBy", "public"."Club"."whatsappNumber", "public"."Club"."initialSetupCompleted", "public"."Club"."initialSetupCompletedAt" FROM "public"."Club" WHERE "public"."Club"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE "public"."Payment"."bookingId" IN ($1) ORDER BY "public"."Payment"."createdAt" DESC OFFSET $2
prisma:query COMMIT
 GET /api/bookings/7a9493bf-0972-4497-aa38-2ccad5145296/split-payments 200 in 3243ms
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE ("public"."SplitPayment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."SplitPayment"."bookingId" IN ($2)) OFFSET $3
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query COMMIT
 GET /api/bookings/7a9493bf-0972-4497-aa38-2ccad5145296/check-payment 200 in 2996ms
prisma:query SELECT "public"."Notification"."id", "public"."Notification"."bookingId", "public"."Notification"."splitPaymentId", "public"."Notification"."type"::text, "public"."Notification"."template", "public"."Notification"."recipient", "public"."Notification"."status"::text, "public"."Notification"."twilioSid", "public"."Notification"."errorMessage", "public"."Notification"."createdAt", "public"."Notification"."updatedAt", "public"."Notification"."sentAt" FROM "public"."Notification" WHERE "public"."Notification"."bookingId" IN ($1) ORDER BY "public"."Notification"."createdAt" DESC OFFSET $2
prisma:query COMMIT
 GET /api/bookings/7a9493bf-0972-4497-aa38-2ccad5145296 200 in 3431ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query BEGIN
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
Error: Route "/api/bookings/[id]" used `params.id`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/bookings/[id]/route.ts:31:13)
  29 |     
  30 |     const session = await requireStaffAuth()
> 31 |     const { id } = params
     |             ^
  32 |
  33 |     const booking = await prisma.booking.findFirst({
  34 |       where: {
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND "public"."Booking"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1) OFFSET $2
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."slug", "public"."Club"."email", "public"."Club"."phone", "public"."Club"."address", "public"."Club"."city", "public"."Club"."state", "public"."Club"."country", "public"."Club"."postalCode", "public"."Club"."website", "public"."Club"."logo", "public"."Club"."description", "public"."Club"."status"::text, "public"."Club"."active", "public"."Club"."stripeAccountId", "public"."Club"."stripeOnboardingCompleted", "public"."Club"."stripePayoutsEnabled", "public"."Club"."stripeChargesEnabled", "public"."Club"."stripeDetailsSubmitted", "public"."Club"."stripeRequirements", "public"."Club"."stripeCommissionRate", "public"."Club"."createdAt", "public"."Club"."updatedAt", "public"."Club"."approvedAt", "public"."Club"."approvedBy", "public"."Club"."whatsappNumber", "public"."Club"."initialSetupCompleted", "public"."Club"."initialSetupCompletedAt" FROM "public"."Club" WHERE "public"."Club"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE "public"."ClubSettings"."clubId" IN ($1) OFFSET $2
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE "public"."SplitPayment"."bookingId" IN ($1) ORDER BY "public"."SplitPayment"."createdAt" ASC OFFSET $2
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE "public"."SplitPayment"."bookingId" IN ($1) ORDER BY "public"."SplitPayment"."createdAt" ASC OFFSET $2
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE "public"."Payment"."bookingId" IN ($1) ORDER BY "public"."Payment"."createdAt" DESC OFFSET $2
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."slug", "public"."Club"."email", "public"."Club"."phone", "public"."Club"."address", "public"."Club"."city", "public"."Club"."state", "public"."Club"."country", "public"."Club"."postalCode", "public"."Club"."website", "public"."Club"."logo", "public"."Club"."description", "public"."Club"."status"::text, "public"."Club"."active", "public"."Club"."stripeAccountId", "public"."Club"."stripeOnboardingCompleted", "public"."Club"."stripePayoutsEnabled", "public"."Club"."stripeChargesEnabled", "public"."Club"."stripeDetailsSubmitted", "public"."Club"."stripeRequirements", "public"."Club"."stripeCommissionRate", "public"."Club"."createdAt", "public"."Club"."updatedAt", "public"."Club"."approvedAt", "public"."Club"."approvedBy", "public"."Club"."whatsappNumber", "public"."Club"."initialSetupCompleted", "public"."Club"."initialSetupCompletedAt" FROM "public"."Club" WHERE "public"."Club"."id" IN ($1) OFFSET $2
prisma:query COMMIT
 GET /api/bookings/7a9493bf-0972-4497-aa38-2ccad5145296/split-payments 200 in 1755ms
prisma:query SELECT "public"."Notification"."id", "public"."Notification"."bookingId", "public"."Notification"."splitPaymentId", "public"."Notification"."type"::text, "public"."Notification"."template", "public"."Notification"."recipient", "public"."Notification"."status"::text, "public"."Notification"."twilioSid", "public"."Notification"."errorMessage", "public"."Notification"."createdAt", "public"."Notification"."updatedAt", "public"."Notification"."sentAt" FROM "public"."Notification" WHERE "public"."Notification"."bookingId" IN ($1) ORDER BY "public"."Notification"."createdAt" DESC OFFSET $2
prisma:query COMMIT
 GET /api/bookings/7a9493bf-0972-4497-aa38-2ccad5145296 200 in 1706ms
 ✓ Compiled /api/bookings in 240ms (1909 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."timezone" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_splitPayments", 0) AS "_aggr_count_splitPayments", COALESCE("aggr_selection_1_Payment"."_aggr_count_payments", 0) AS "_aggr_count_payments", COALESCE("aggr_selection_2_Booking"."_aggr_count_bookings", 0) AS "_aggr_count_bookings" FROM "public"."BookingGroup" LEFT JOIN (SELECT "public"."SplitPayment"."bookingGroupId", COUNT(*) AS "_aggr_count_splitPayments" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingGroupId") AS "aggr_selection_0_SplitPayment" ON ("public"."BookingGroup"."id" = "aggr_selection_0_SplitPayment"."bookingGroupId") LEFT JOIN (SELECT "public"."Payment"."bookingGroupId", COUNT(*) AS "_aggr_count_payments" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingGroupId") AS "aggr_selection_1_Payment" ON ("public"."BookingGroup"."id" = "aggr_selection_1_Payment"."bookingGroupId") LEFT JOIN (SELECT "public"."Booking"."bookingGroupId", COUNT(*) AS "_aggr_count_bookings" FROM "public"."Booking" WHERE 1=1 GROUP BY "public"."Booking"."bookingGroupId") AS "aggr_selection_2_Booking" ON ("public"."BookingGroup"."id" = "aggr_selection_2_Booking"."bookingGroupId") WHERE ("public"."BookingGroup"."clubId" = $1 AND "public"."BookingGroup"."date" >= $2 AND "public"."BookingGroup"."date" < $3 AND "public"."BookingGroup"."status" <> CAST($4::text AS "public"."BookingStatus")) ORDER BY "public"."BookingGroup"."date" ASC, "public"."BookingGroup"."startTime" ASC OFFSET $5
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_SplitPayment", 0) AS "_aggr_count_SplitPayment", COALESCE("aggr_selection_1_Payment"."_aggr_count_Payment", 0) AS "_aggr_count_Payment" FROM "public"."Booking" LEFT JOIN (SELECT "public"."SplitPayment"."bookingId", COUNT(*) AS "_aggr_count_SplitPayment" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingId") AS "aggr_selection_0_SplitPayment" ON ("public"."Booking"."id" = "aggr_selection_0_SplitPayment"."bookingId") LEFT JOIN (SELECT "public"."Payment"."bookingId", COUNT(*) AS "_aggr_count_Payment" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingId") AS "aggr_selection_1_Payment" ON ("public"."Booking"."id" = "aggr_selection_1_Payment"."bookingId") WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."date" < $3 AND "public"."Booking"."status" <> CAST($4::text AS "public"."BookingStatus") AND "public"."Booking"."bookingGroupId" IS NULL) ORDER BY "public"."Booking"."date" ASC, "public"."Booking"."startTime" ASC OFFSET $5
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Class"."id", "public"."Class"."clubId", "public"."Class"."courtId", "public"."Class"."name", "public"."Class"."description", "public"."Class"."instructorId", "public"."Class"."instructorName", "public"."Class"."level"::text, "public"."Class"."type"::text, "public"."Class"."maxStudents", "public"."Class"."enrolledCount", "public"."Class"."price", "public"."Class"."currency", "public"."Class"."date", "public"."Class"."startTime", "public"."Class"."endTime", "public"."Class"."duration", "public"."Class"."status"::text, "public"."Class"."recurring", "public"."Class"."recurringDays", "public"."Class"."notes", "public"."Class"."createdAt", "public"."Class"."updatedAt", "public"."Class"."cancelledAt", COALESCE("aggr_selection_0_ClassEnrollment"."_aggr_count_ClassEnrollment", 0) AS "_aggr_count_ClassEnrollment" FROM "public"."Class" LEFT JOIN (SELECT "public"."ClassEnrollment"."classId", COUNT(*) AS "_aggr_count_ClassEnrollment" FROM "public"."ClassEnrollment" WHERE 1=1 GROUP BY "public"."ClassEnrollment"."classId") AS "aggr_selection_0_ClassEnrollment" ON ("public"."Class"."id" = "aggr_selection_0_ClassEnrollment"."classId") WHERE ("public"."Class"."clubId" = $1 AND "public"."Class"."date" >= $2 AND "public"."Class"."date" < $3 AND "public"."Class"."status" <> CAST($4::text AS "public"."ClassStatus")) ORDER BY "public"."Class"."date" ASC, "public"."Class"."startTime" ASC OFFSET $5
prisma:query COMMIT
 GET /api/bookings?date=2025-09-25 200 in 2706ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."timezone" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_splitPayments", 0) AS "_aggr_count_splitPayments", COALESCE("aggr_selection_1_Payment"."_aggr_count_payments", 0) AS "_aggr_count_payments", COALESCE("aggr_selection_2_Booking"."_aggr_count_bookings", 0) AS "_aggr_count_bookings" FROM "public"."BookingGroup" LEFT JOIN (SELECT "public"."SplitPayment"."bookingGroupId", COUNT(*) AS "_aggr_count_splitPayments" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingGroupId") AS "aggr_selection_0_SplitPayment" ON ("public"."BookingGroup"."id" = "aggr_selection_0_SplitPayment"."bookingGroupId") LEFT JOIN (SELECT "public"."Payment"."bookingGroupId", COUNT(*) AS "_aggr_count_payments" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingGroupId") AS "aggr_selection_1_Payment" ON ("public"."BookingGroup"."id" = "aggr_selection_1_Payment"."bookingGroupId") LEFT JOIN (SELECT "public"."Booking"."bookingGroupId", COUNT(*) AS "_aggr_count_bookings" FROM "public"."Booking" WHERE 1=1 GROUP BY "public"."Booking"."bookingGroupId") AS "aggr_selection_2_Booking" ON ("public"."BookingGroup"."id" = "aggr_selection_2_Booking"."bookingGroupId") WHERE ("public"."BookingGroup"."clubId" = $1 AND "public"."BookingGroup"."date" >= $2 AND "public"."BookingGroup"."date" < $3 AND "public"."BookingGroup"."status" <> CAST($4::text AS "public"."BookingStatus")) ORDER BY "public"."BookingGroup"."date" ASC, "public"."BookingGroup"."startTime" ASC OFFSET $5
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE "public"."Booking"."bookingGroupId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingGroupId" IN ($1,$2) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_SplitPayment", 0) AS "_aggr_count_SplitPayment", COALESCE("aggr_selection_1_Payment"."_aggr_count_Payment", 0) AS "_aggr_count_Payment" FROM "public"."Booking" LEFT JOIN (SELECT "public"."SplitPayment"."bookingId", COUNT(*) AS "_aggr_count_SplitPayment" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingId") AS "aggr_selection_0_SplitPayment" ON ("public"."Booking"."id" = "aggr_selection_0_SplitPayment"."bookingId") LEFT JOIN (SELECT "public"."Payment"."bookingId", COUNT(*) AS "_aggr_count_Payment" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingId") AS "aggr_selection_1_Payment" ON ("public"."Booking"."id" = "aggr_selection_1_Payment"."bookingId") WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."date" < $3 AND "public"."Booking"."status" <> CAST($4::text AS "public"."BookingStatus") AND "public"."Booking"."bookingGroupId" IS NULL) ORDER BY "public"."Booking"."date" ASC, "public"."Booking"."startTime" ASC OFFSET $5
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingId" IN ($1,$2,$3) OFFSET $4
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Class"."id", "public"."Class"."clubId", "public"."Class"."courtId", "public"."Class"."name", "public"."Class"."description", "public"."Class"."instructorId", "public"."Class"."instructorName", "public"."Class"."level"::text, "public"."Class"."type"::text, "public"."Class"."maxStudents", "public"."Class"."enrolledCount", "public"."Class"."price", "public"."Class"."currency", "public"."Class"."date", "public"."Class"."startTime", "public"."Class"."endTime", "public"."Class"."duration", "public"."Class"."status"::text, "public"."Class"."recurring", "public"."Class"."recurringDays", "public"."Class"."notes", "public"."Class"."createdAt", "public"."Class"."updatedAt", "public"."Class"."cancelledAt", COALESCE("aggr_selection_0_ClassEnrollment"."_aggr_count_ClassEnrollment", 0) AS "_aggr_count_ClassEnrollment" FROM "public"."Class" LEFT JOIN (SELECT "public"."ClassEnrollment"."classId", COUNT(*) AS "_aggr_count_ClassEnrollment" FROM "public"."ClassEnrollment" WHERE 1=1 GROUP BY "public"."ClassEnrollment"."classId") AS "aggr_selection_0_ClassEnrollment" ON ("public"."Class"."id" = "aggr_selection_0_ClassEnrollment"."classId") WHERE ("public"."Class"."clubId" = $1 AND "public"."Class"."date" >= $2 AND "public"."Class"."date" < $3 AND "public"."Class"."status" <> CAST($4::text AS "public"."ClassStatus")) ORDER BY "public"."Class"."date" ASC, "public"."Class"."startTime" ASC OFFSET $5
prisma:query COMMIT
 GET /api/bookings?date=2025-09-24 200 in 2730ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[Check Payment] Checking payment for booking: 0c957240-66bb-4154-bead-b27bf94e30f9
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND "public"."Booking"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt" FROM "public"."BookingGroup" WHERE ("public"."BookingGroup"."id" = $1 AND "public"."BookingGroup"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE ("public"."Payment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."Payment"."bookingGroupId" IN ($2)) ORDER BY "public"."Payment"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query COMMIT
 GET /api/bookings/0c957240-66bb-4154-bead-b27bf94e30f9/check-payment 200 in 1326ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[Check Payment] Checking payment for booking: 0c957240-66bb-4154-bead-b27bf94e30f9
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND "public"."Booking"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt" FROM "public"."BookingGroup" WHERE ("public"."BookingGroup"."id" = $1 AND "public"."BookingGroup"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE ("public"."Payment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."Payment"."bookingGroupId" IN ($2)) ORDER BY "public"."Payment"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query COMMIT
 GET /api/bookings/0c957240-66bb-4154-bead-b27bf94e30f9/check-payment 200 in 1317ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query SELECT 1
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE ("public"."SplitPayment"."id" = $1 AND ("public"."SplitPayment"."bookingId" = $2 OR "public"."SplitPayment"."bookingGroupId" = $3)) LIMIT $4 OFFSET $5
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt" FROM "public"."BookingGroup" WHERE "public"."BookingGroup"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE "public"."Booking"."bookingGroupId" IN ($1) OFFSET $2
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query UPDATE "public"."SplitPayment" SET "status" = CAST($1::text AS "public"."PaymentStatus"), "completedAt" = $2, "stripeChargeId" = $3, "updatedAt" = $4 WHERE ("public"."SplitPayment"."id" = $5 AND 1=1) RETURNING "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt"
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE "public"."SplitPayment"."bookingGroupId" = $1 OFFSET $2
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query INSERT INTO "public"."Transaction" ("id","clubId","type","category","amount","currency","description","reference","bookingId","date","createdBy","notes","createdAt","updatedAt","metadata") VALUES ($1,$2,CAST($3::text AS "public"."TransactionType"),CAST($4::text AS "public"."TransactionCategory"),$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15) RETURNING "public"."Transaction"."id", "public"."Transaction"."clubId", "public"."Transaction"."type"::text, "public"."Transaction"."category"::text, "public"."Transaction"."amount", "public"."Transaction"."currency", "public"."Transaction"."description", "public"."Transaction"."reference", "public"."Transaction"."bookingId", "public"."Transaction"."playerId", "public"."Transaction"."date", "public"."Transaction"."createdBy", "public"."Transaction"."notes", "public"."Transaction"."createdAt", "public"."Transaction"."updatedAt", "public"."Transaction"."metadata", "public"."Transaction"."recurringExpenseId"
prisma:query COMMIT
💰 Transaction created for split payment: Jugador 3 - $375.00 MXN
[WhatsApp Hook] Payment completed: 881caf38-7974-4fb7-a1d6-47f8919afb86
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE ("public"."SplitPayment"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt" FROM "public"."BookingGroup" WHERE "public"."BookingGroup"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."slug", "public"."Club"."email", "public"."Club"."phone", "public"."Club"."address", "public"."Club"."city", "public"."Club"."state", "public"."Club"."country", "public"."Club"."postalCode", "public"."Club"."website", "public"."Club"."logo", "public"."Club"."description", "public"."Club"."status"::text, "public"."Club"."active", "public"."Club"."stripeAccountId", "public"."Club"."stripeOnboardingCompleted", "public"."Club"."stripePayoutsEnabled", "public"."Club"."stripeChargesEnabled", "public"."Club"."stripeDetailsSubmitted", "public"."Club"."stripeRequirements", "public"."Club"."stripeCommissionRate", "public"."Club"."createdAt", "public"."Club"."updatedAt", "public"."Club"."approvedAt", "public"."Club"."approvedBy", "public"."Club"."whatsappNumber", "public"."Club"."initialSetupCompleted", "public"."Club"."initialSetupCompletedAt" FROM "public"."Club" WHERE "public"."Club"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE "public"."Booking"."bookingGroupId" IN ($1) OFFSET $2
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2) OFFSET $3
prisma:query COMMIT
[WhatsApp Hook] Generating payment completion confirmation for: 
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."whatsappNumber", "public"."Club"."phone" FROM "public"."Club" WHERE ("public"."Club"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
[WhatsApp Hook] Failed to generate payment completion link: Número de teléfono del cliente requerido
 PUT /api/bookings/0c957240-66bb-4154-bead-b27bf94e30f9/split-payments 200 in 3609ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."timezone" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_splitPayments", 0) AS "_aggr_count_splitPayments", COALESCE("aggr_selection_1_Payment"."_aggr_count_payments", 0) AS "_aggr_count_payments", COALESCE("aggr_selection_2_Booking"."_aggr_count_bookings", 0) AS "_aggr_count_bookings" FROM "public"."BookingGroup" LEFT JOIN (SELECT "public"."SplitPayment"."bookingGroupId", COUNT(*) AS "_aggr_count_splitPayments" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingGroupId") AS "aggr_selection_0_SplitPayment" ON ("public"."BookingGroup"."id" = "aggr_selection_0_SplitPayment"."bookingGroupId") LEFT JOIN (SELECT "public"."Payment"."bookingGroupId", COUNT(*) AS "_aggr_count_payments" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingGroupId") AS "aggr_selection_1_Payment" ON ("public"."BookingGroup"."id" = "aggr_selection_1_Payment"."bookingGroupId") LEFT JOIN (SELECT "public"."Booking"."bookingGroupId", COUNT(*) AS "_aggr_count_bookings" FROM "public"."Booking" WHERE 1=1 GROUP BY "public"."Booking"."bookingGroupId") AS "aggr_selection_2_Booking" ON ("public"."BookingGroup"."id" = "aggr_selection_2_Booking"."bookingGroupId") WHERE ("public"."BookingGroup"."clubId" = $1 AND "public"."BookingGroup"."date" >= $2 AND "public"."BookingGroup"."date" < $3 AND "public"."BookingGroup"."status" <> CAST($4::text AS "public"."BookingStatus")) ORDER BY "public"."BookingGroup"."date" ASC, "public"."BookingGroup"."startTime" ASC OFFSET $5
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE "public"."Booking"."bookingGroupId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingGroupId" IN ($1,$2) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_SplitPayment", 0) AS "_aggr_count_SplitPayment", COALESCE("aggr_selection_1_Payment"."_aggr_count_Payment", 0) AS "_aggr_count_Payment" FROM "public"."Booking" LEFT JOIN (SELECT "public"."SplitPayment"."bookingId", COUNT(*) AS "_aggr_count_SplitPayment" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingId") AS "aggr_selection_0_SplitPayment" ON ("public"."Booking"."id" = "aggr_selection_0_SplitPayment"."bookingId") LEFT JOIN (SELECT "public"."Payment"."bookingId", COUNT(*) AS "_aggr_count_Payment" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingId") AS "aggr_selection_1_Payment" ON ("public"."Booking"."id" = "aggr_selection_1_Payment"."bookingId") WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."date" < $3 AND "public"."Booking"."status" <> CAST($4::text AS "public"."BookingStatus") AND "public"."Booking"."bookingGroupId" IS NULL) ORDER BY "public"."Booking"."date" ASC, "public"."Booking"."startTime" ASC OFFSET $5
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingId" IN ($1,$2,$3) OFFSET $4
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Class"."id", "public"."Class"."clubId", "public"."Class"."courtId", "public"."Class"."name", "public"."Class"."description", "public"."Class"."instructorId", "public"."Class"."instructorName", "public"."Class"."level"::text, "public"."Class"."type"::text, "public"."Class"."maxStudents", "public"."Class"."enrolledCount", "public"."Class"."price", "public"."Class"."currency", "public"."Class"."date", "public"."Class"."startTime", "public"."Class"."endTime", "public"."Class"."duration", "public"."Class"."status"::text, "public"."Class"."recurring", "public"."Class"."recurringDays", "public"."Class"."notes", "public"."Class"."createdAt", "public"."Class"."updatedAt", "public"."Class"."cancelledAt", COALESCE("aggr_selection_0_ClassEnrollment"."_aggr_count_ClassEnrollment", 0) AS "_aggr_count_ClassEnrollment" FROM "public"."Class" LEFT JOIN (SELECT "public"."ClassEnrollment"."classId", COUNT(*) AS "_aggr_count_ClassEnrollment" FROM "public"."ClassEnrollment" WHERE 1=1 GROUP BY "public"."ClassEnrollment"."classId") AS "aggr_selection_0_ClassEnrollment" ON ("public"."Class"."id" = "aggr_selection_0_ClassEnrollment"."classId") WHERE ("public"."Class"."clubId" = $1 AND "public"."Class"."date" >= $2 AND "public"."Class"."date" < $3 AND "public"."Class"."status" <> CAST($4::text AS "public"."ClassStatus")) ORDER BY "public"."Class"."date" ASC, "public"."Class"."startTime" ASC OFFSET $5
prisma:query COMMIT
 GET /api/bookings?date=2025-09-24 200 in 2549ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."timezone" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_splitPayments", 0) AS "_aggr_count_splitPayments", COALESCE("aggr_selection_1_Payment"."_aggr_count_payments", 0) AS "_aggr_count_payments", COALESCE("aggr_selection_2_Booking"."_aggr_count_bookings", 0) AS "_aggr_count_bookings" FROM "public"."BookingGroup" LEFT JOIN (SELECT "public"."SplitPayment"."bookingGroupId", COUNT(*) AS "_aggr_count_splitPayments" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingGroupId") AS "aggr_selection_0_SplitPayment" ON ("public"."BookingGroup"."id" = "aggr_selection_0_SplitPayment"."bookingGroupId") LEFT JOIN (SELECT "public"."Payment"."bookingGroupId", COUNT(*) AS "_aggr_count_payments" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingGroupId") AS "aggr_selection_1_Payment" ON ("public"."BookingGroup"."id" = "aggr_selection_1_Payment"."bookingGroupId") LEFT JOIN (SELECT "public"."Booking"."bookingGroupId", COUNT(*) AS "_aggr_count_bookings" FROM "public"."Booking" WHERE 1=1 GROUP BY "public"."Booking"."bookingGroupId") AS "aggr_selection_2_Booking" ON ("public"."BookingGroup"."id" = "aggr_selection_2_Booking"."bookingGroupId") WHERE ("public"."BookingGroup"."clubId" = $1 AND "public"."BookingGroup"."date" >= $2 AND "public"."BookingGroup"."date" < $3 AND "public"."BookingGroup"."status" <> CAST($4::text AS "public"."BookingStatus")) ORDER BY "public"."BookingGroup"."date" ASC, "public"."BookingGroup"."startTime" ASC OFFSET $5
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE "public"."Booking"."bookingGroupId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingGroupId" IN ($1,$2) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_SplitPayment", 0) AS "_aggr_count_SplitPayment", COALESCE("aggr_selection_1_Payment"."_aggr_count_Payment", 0) AS "_aggr_count_Payment" FROM "public"."Booking" LEFT JOIN (SELECT "public"."SplitPayment"."bookingId", COUNT(*) AS "_aggr_count_SplitPayment" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingId") AS "aggr_selection_0_SplitPayment" ON ("public"."Booking"."id" = "aggr_selection_0_SplitPayment"."bookingId") LEFT JOIN (SELECT "public"."Payment"."bookingId", COUNT(*) AS "_aggr_count_Payment" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingId") AS "aggr_selection_1_Payment" ON ("public"."Booking"."id" = "aggr_selection_1_Payment"."bookingId") WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."date" < $3 AND "public"."Booking"."status" <> CAST($4::text AS "public"."BookingStatus") AND "public"."Booking"."bookingGroupId" IS NULL) ORDER BY "public"."Booking"."date" ASC, "public"."Booking"."startTime" ASC OFFSET $5
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingId" IN ($1,$2,$3) OFFSET $4
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Class"."id", "public"."Class"."clubId", "public"."Class"."courtId", "public"."Class"."name", "public"."Class"."description", "public"."Class"."instructorId", "public"."Class"."instructorName", "public"."Class"."level"::text, "public"."Class"."type"::text, "public"."Class"."maxStudents", "public"."Class"."enrolledCount", "public"."Class"."price", "public"."Class"."currency", "public"."Class"."date", "public"."Class"."startTime", "public"."Class"."endTime", "public"."Class"."duration", "public"."Class"."status"::text, "public"."Class"."recurring", "public"."Class"."recurringDays", "public"."Class"."notes", "public"."Class"."createdAt", "public"."Class"."updatedAt", "public"."Class"."cancelledAt", COALESCE("aggr_selection_0_ClassEnrollment"."_aggr_count_ClassEnrollment", 0) AS "_aggr_count_ClassEnrollment" FROM "public"."Class" LEFT JOIN (SELECT "public"."ClassEnrollment"."classId", COUNT(*) AS "_aggr_count_ClassEnrollment" FROM "public"."ClassEnrollment" WHERE 1=1 GROUP BY "public"."ClassEnrollment"."classId") AS "aggr_selection_0_ClassEnrollment" ON ("public"."Class"."id" = "aggr_selection_0_ClassEnrollment"."classId") WHERE ("public"."Class"."clubId" = $1 AND "public"."Class"."date" >= $2 AND "public"."Class"."date" < $3 AND "public"."Class"."status" <> CAST($4::text AS "public"."ClassStatus")) ORDER BY "public"."Class"."date" ASC, "public"."Class"."startTime" ASC OFFSET $5
prisma:query COMMIT
 GET /api/bookings?date=2025-09-24 200 in 2550ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[Check Payment] Checking payment for booking: 0c957240-66bb-4154-bead-b27bf94e30f9
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND "public"."Booking"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt" FROM "public"."BookingGroup" WHERE ("public"."BookingGroup"."id" = $1 AND "public"."BookingGroup"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE ("public"."Payment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."Payment"."bookingGroupId" IN ($2)) ORDER BY "public"."Payment"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query COMMIT
 GET /api/bookings/0c957240-66bb-4154-bead-b27bf94e30f9/check-payment 200 in 1338ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[Check Payment] Checking payment for booking: 0c957240-66bb-4154-bead-b27bf94e30f9
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND "public"."Booking"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt" FROM "public"."BookingGroup" WHERE ("public"."BookingGroup"."id" = $1 AND "public"."BookingGroup"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE ("public"."Payment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."Payment"."bookingGroupId" IN ($2)) ORDER BY "public"."Payment"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query COMMIT
 GET /api/bookings/0c957240-66bb-4154-bead-b27bf94e30f9/check-payment 200 in 1442ms
 ✓ Compiled /api/split-payments/regenerate in 274ms (2888 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:error 
Invalid `prisma.splitPayment.findUnique()` invocation:

{
  where: {
    id: "d6db01ca-41ed-427c-8198-b321bbd85f55"
  },
  include: {
    booking: {
    ~~~~~~~
      include: {
        club: true,
        court: true
      }
    },
    bookingGroup: {
      include: {
        club: true,
        bookings: {
          include: {
            court: true
          }
        }
      }
    },
?   Notification?: true,
?   BookingGroup?: true,
?   Booking?: true
  }
}

Unknown field `booking` for include statement on model `SplitPayment`. Available options are marked with ?.
file:///Users/ja/v4/bmad-nextjs-app/node_modules/@prisma/client/runtime/library.js: Invalid source map. Only conformant source maps can be used to find the original code. Cause: TypeError [ERR_INVALID_ARG_TYPE]: The "payload" argument must be of type object. Received null
Error regenerating payment intent: Error [PrismaClientValidationError]: 
Invalid `prisma.splitPayment.findUnique()` invocation:

{
  where: {
    id: "d6db01ca-41ed-427c-8198-b321bbd85f55"
  },
  include: {
    booking: {
    ~~~~~~~
      include: {
        club: true,
        court: true
      }
    },
    bookingGroup: {
      include: {
        club: true,
        bookings: {
          include: {
            court: true
          }
        }
      }
    },
?   Notification?: true,
?   BookingGroup?: true,
?   Booking?: true
  }
}

Unknown field `booking` for include statement on model `SplitPayment`. Available options are marked with ?.
    at async POST (app/api/split-payments/regenerate/route.ts:34:26)
  32 |
  33 |     // Obtener el split payment
> 34 |     const splitPayment = await prisma.splitPayment.findUnique({
     |                          ^
  35 |       where: { id: splitPaymentId },
  36 |       include: {
  37 |         booking: { {
  clientVersion: '5.22.0'
}
 POST /api/split-payments/regenerate 500 in 1548ms
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."status"::text, "public"."Club"."active" FROM "public"."Club" WHERE ("public"."Club"."slug" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."role"::text, "public"."User"."clubId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."UserPermission"."id", "public"."UserPermission"."moduleCode", "public"."UserPermission"."userId" FROM "public"."UserPermission" WHERE "public"."UserPermission"."userId" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubModule"."id", "public"."ClubModule"."clubId", "public"."ClubModule"."moduleId", "public"."ClubModule"."isEnabled", "public"."ClubModule"."enabledAt", "public"."ClubModule"."disabledAt", "public"."ClubModule"."gracePeriodEnd", "public"."ClubModule"."lastExportAt", "public"."ClubModule"."settings", "public"."ClubModule"."createdAt", "public"."ClubModule"."updatedAt" FROM "public"."ClubModule" WHERE ("public"."ClubModule"."clubId" = $1 AND "public"."ClubModule"."isEnabled" = $2) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubPackage"."id", "public"."ClubPackage"."clubId", "public"."ClubPackage"."packageId", "public"."ClubPackage"."isActive", "public"."ClubPackage"."activatedAt", "public"."ClubPackage"."deactivatedAt", "public"."ClubPackage"."customPricing", "public"."ClubPackage"."notes", "public"."ClubPackage"."createdAt", "public"."ClubPackage"."updatedAt" FROM "public"."ClubPackage" WHERE ("public"."ClubPackage"."clubId" = $1 AND "public"."ClubPackage"."isActive" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
 GET /c/club-demo-padelyzer/dashboard/bookings 200 in 2690ms
 ✓ Compiled /favicon.ico in 197ms (1905 modules)
 GET /favicon.ico 200 in 263ms
 ✓ Compiled /api/settings/club in 1188ms (2902 modules)
 ✓ Compiled in 0ms (1907 modules)
 ✓ Compiled in 0ms (1907 modules)
 ✓ Compiled in 0ms (1907 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query DEALLOCATE ALL
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."status"::text, "public"."Club"."active" FROM "public"."Club" WHERE ("public"."Club"."slug" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."timezone" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."role"::text, "public"."User"."clubId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_splitPayments", 0) AS "_aggr_count_splitPayments", COALESCE("aggr_selection_1_Payment"."_aggr_count_payments", 0) AS "_aggr_count_payments", COALESCE("aggr_selection_2_Booking"."_aggr_count_bookings", 0) AS "_aggr_count_bookings" FROM "public"."BookingGroup" LEFT JOIN (SELECT "public"."SplitPayment"."bookingGroupId", COUNT(*) AS "_aggr_count_splitPayments" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingGroupId") AS "aggr_selection_0_SplitPayment" ON ("public"."BookingGroup"."id" = "aggr_selection_0_SplitPayment"."bookingGroupId") LEFT JOIN (SELECT "public"."Payment"."bookingGroupId", COUNT(*) AS "_aggr_count_payments" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingGroupId") AS "aggr_selection_1_Payment" ON ("public"."BookingGroup"."id" = "aggr_selection_1_Payment"."bookingGroupId") LEFT JOIN (SELECT "public"."Booking"."bookingGroupId", COUNT(*) AS "_aggr_count_bookings" FROM "public"."Booking" WHERE 1=1 GROUP BY "public"."Booking"."bookingGroupId") AS "aggr_selection_2_Booking" ON ("public"."BookingGroup"."id" = "aggr_selection_2_Booking"."bookingGroupId") WHERE ("public"."BookingGroup"."clubId" = $1 AND "public"."BookingGroup"."date" >= $2 AND "public"."BookingGroup"."date" < $3 AND "public"."BookingGroup"."status" <> CAST($4::text AS "public"."BookingStatus")) ORDER BY "public"."BookingGroup"."date" ASC, "public"."BookingGroup"."startTime" ASC OFFSET $5
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."clubId" = $1 ORDER BY "public"."Court"."order" ASC OFFSET $2
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query COMMIT
prisma:query SELECT "public"."UserPermission"."id", "public"."UserPermission"."moduleCode", "public"."UserPermission"."userId" FROM "public"."UserPermission" WHERE "public"."UserPermission"."userId" IN ($1) OFFSET $2
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE "public"."Booking"."bookingGroupId" IN ($1,$2) OFFSET $3
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query COMMIT
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2,$3) OFFSET $4
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."slug", "public"."Club"."email", "public"."Club"."phone", "public"."Club"."address", "public"."Club"."city", "public"."Club"."state", "public"."Club"."postalCode", "public"."Club"."country", "public"."Club"."website", "public"."Club"."description", "public"."Club"."logo", "public"."Club"."active", "public"."Club"."status"::text FROM "public"."Club" WHERE ("public"."Club"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query COMMIT
 GET /api/settings/club 200 in 3691ms
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingGroupId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."ClubModule"."id", "public"."ClubModule"."clubId", "public"."ClubModule"."moduleId", "public"."ClubModule"."isEnabled", "public"."ClubModule"."enabledAt", "public"."ClubModule"."disabledAt", "public"."ClubModule"."gracePeriodEnd", "public"."ClubModule"."lastExportAt", "public"."ClubModule"."settings", "public"."ClubModule"."createdAt", "public"."ClubModule"."updatedAt" FROM "public"."ClubModule" WHERE ("public"."ClubModule"."clubId" = $1 AND "public"."ClubModule"."isEnabled" = $2) OFFSET $3
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_SplitPayment", 0) AS "_aggr_count_SplitPayment", COALESCE("aggr_selection_1_Payment"."_aggr_count_Payment", 0) AS "_aggr_count_Payment" FROM "public"."Booking" LEFT JOIN (SELECT "public"."SplitPayment"."bookingId", COUNT(*) AS "_aggr_count_SplitPayment" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingId") AS "aggr_selection_0_SplitPayment" ON ("public"."Booking"."id" = "aggr_selection_0_SplitPayment"."bookingId") LEFT JOIN (SELECT "public"."Payment"."bookingId", COUNT(*) AS "_aggr_count_Payment" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingId") AS "aggr_selection_1_Payment" ON ("public"."Booking"."id" = "aggr_selection_1_Payment"."bookingId") WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."date" < $3 AND "public"."Booking"."status" <> CAST($4::text AS "public"."BookingStatus") AND "public"."Booking"."bookingGroupId" IS NULL) ORDER BY "public"."Booking"."date" ASC, "public"."Booking"."startTime" ASC OFFSET $5
prisma:query DEALLOCATE ALL
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT "public"."ClubPackage"."id", "public"."ClubPackage"."clubId", "public"."ClubPackage"."packageId", "public"."ClubPackage"."isActive", "public"."ClubPackage"."activatedAt", "public"."ClubPackage"."deactivatedAt", "public"."ClubPackage"."customPricing", "public"."ClubPackage"."notes", "public"."ClubPackage"."createdAt", "public"."ClubPackage"."updatedAt" FROM "public"."ClubPackage" WHERE ("public"."ClubPackage"."clubId" = $1 AND "public"."ClubPackage"."isActive" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query COMMIT
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2) OFFSET $3
 ○ Compiling /api/settings/payments ...
 GET /c/club-demo-padelyzer/dashboard/bookings 200 in 3904ms
prisma:query COMMIT
 GET /api/settings/courts 200 in 4265ms
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingId" IN ($1,$2,$3) OFFSET $4
prisma:query COMMIT
 ✓ Compiled /api/settings/payments in 753ms (1910 modules)
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Class"."id", "public"."Class"."clubId", "public"."Class"."courtId", "public"."Class"."name", "public"."Class"."description", "public"."Class"."instructorId", "public"."Class"."instructorName", "public"."Class"."level"::text, "public"."Class"."type"::text, "public"."Class"."maxStudents", "public"."Class"."enrolledCount", "public"."Class"."price", "public"."Class"."currency", "public"."Class"."date", "public"."Class"."startTime", "public"."Class"."endTime", "public"."Class"."duration", "public"."Class"."status"::text, "public"."Class"."recurring", "public"."Class"."recurringDays", "public"."Class"."notes", "public"."Class"."createdAt", "public"."Class"."updatedAt", "public"."Class"."cancelledAt", COALESCE("aggr_selection_0_ClassEnrollment"."_aggr_count_ClassEnrollment", 0) AS "_aggr_count_ClassEnrollment" FROM "public"."Class" LEFT JOIN (SELECT "public"."ClassEnrollment"."classId", COUNT(*) AS "_aggr_count_ClassEnrollment" FROM "public"."ClassEnrollment" WHERE 1=1 GROUP BY "public"."ClassEnrollment"."classId") AS "aggr_selection_0_ClassEnrollment" ON ("public"."Class"."id" = "aggr_selection_0_ClassEnrollment"."classId") WHERE ("public"."Class"."clubId" = $1 AND "public"."Class"."date" >= $2 AND "public"."Class"."date" < $3 AND "public"."Class"."status" <> CAST($4::text AS "public"."ClassStatus")) ORDER BY "public"."Class"."date" ASC, "public"."Class"."startTime" ASC OFFSET $5
prisma:query COMMIT
 GET /api/bookings?date=2025-09-24 200 in 4931ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
 GET /favicon.ico 200 in 671ms
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."PaymentProvider"."id", "public"."PaymentProvider"."clubId", "public"."PaymentProvider"."providerId", "public"."PaymentProvider"."name", "public"."PaymentProvider"."enabled", "public"."PaymentProvider"."config", "public"."PaymentProvider"."fees", "public"."PaymentProvider"."createdAt", "public"."PaymentProvider"."updatedAt" FROM "public"."PaymentProvider" WHERE "public"."PaymentProvider"."clubId" = $1 ORDER BY "public"."PaymentProvider"."createdAt" ASC OFFSET $2
prisma:query COMMIT
 GET /api/settings/payments 200 in 3009ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query SELECT 1
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[Check Payment] Checking payment for booking: 7a9493bf-0972-4497-aa38-2ccad5145296
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND "public"."Booking"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE ("public"."Payment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."Payment"."bookingId" IN ($2)) ORDER BY "public"."Payment"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE ("public"."SplitPayment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."SplitPayment"."bookingId" IN ($2)) OFFSET $3
prisma:query COMMIT
 GET /api/bookings/7a9493bf-0972-4497-aa38-2ccad5145296/check-payment 200 in 1197ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[Check Payment] Checking payment for booking: 7a9493bf-0972-4497-aa38-2ccad5145296
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND "public"."Booking"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE ("public"."Payment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."Payment"."bookingId" IN ($2)) ORDER BY "public"."Payment"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE ("public"."SplitPayment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."SplitPayment"."bookingId" IN ($2)) OFFSET $3
prisma:query COMMIT
 GET /api/bookings/7a9493bf-0972-4497-aa38-2ccad5145296/check-payment 200 in 1121ms
 ✓ Compiled in 689ms (999 modules)
 ✓ Compiled in 322ms (999 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."status"::text, "public"."Club"."active" FROM "public"."Club" WHERE ("public"."Club"."slug" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."status"::text, "public"."Club"."active" FROM "public"."Club" WHERE ("public"."Club"."slug" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query BEGIN
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."role"::text, "public"."User"."clubId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."role"::text, "public"."User"."clubId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."UserPermission"."id", "public"."UserPermission"."moduleCode", "public"."UserPermission"."userId" FROM "public"."UserPermission" WHERE "public"."UserPermission"."userId" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query SELECT "public"."UserPermission"."id", "public"."UserPermission"."moduleCode", "public"."UserPermission"."userId" FROM "public"."UserPermission" WHERE "public"."UserPermission"."userId" IN ($1) OFFSET $2
prisma:query BEGIN
prisma:query COMMIT
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubModule"."id", "public"."ClubModule"."clubId", "public"."ClubModule"."moduleId", "public"."ClubModule"."isEnabled", "public"."ClubModule"."enabledAt", "public"."ClubModule"."disabledAt", "public"."ClubModule"."gracePeriodEnd", "public"."ClubModule"."lastExportAt", "public"."ClubModule"."settings", "public"."ClubModule"."createdAt", "public"."ClubModule"."updatedAt" FROM "public"."ClubModule" WHERE ("public"."ClubModule"."clubId" = $1 AND "public"."ClubModule"."isEnabled" = $2) OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."ClubModule"."id", "public"."ClubModule"."clubId", "public"."ClubModule"."moduleId", "public"."ClubModule"."isEnabled", "public"."ClubModule"."enabledAt", "public"."ClubModule"."disabledAt", "public"."ClubModule"."gracePeriodEnd", "public"."ClubModule"."lastExportAt", "public"."ClubModule"."settings", "public"."ClubModule"."createdAt", "public"."ClubModule"."updatedAt" FROM "public"."ClubModule" WHERE ("public"."ClubModule"."clubId" = $1 AND "public"."ClubModule"."isEnabled" = $2) OFFSET $3
prisma:query BEGIN
prisma:query COMMIT
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubPackage"."id", "public"."ClubPackage"."clubId", "public"."ClubPackage"."packageId", "public"."ClubPackage"."isActive", "public"."ClubPackage"."activatedAt", "public"."ClubPackage"."deactivatedAt", "public"."ClubPackage"."customPricing", "public"."ClubPackage"."notes", "public"."ClubPackage"."createdAt", "public"."ClubPackage"."updatedAt" FROM "public"."ClubPackage" WHERE ("public"."ClubPackage"."clubId" = $1 AND "public"."ClubPackage"."isActive" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
prisma:query SELECT "public"."ClubPackage"."id", "public"."ClubPackage"."clubId", "public"."ClubPackage"."packageId", "public"."ClubPackage"."isActive", "public"."ClubPackage"."activatedAt", "public"."ClubPackage"."deactivatedAt", "public"."ClubPackage"."customPricing", "public"."ClubPackage"."notes", "public"."ClubPackage"."createdAt", "public"."ClubPackage"."updatedAt" FROM "public"."ClubPackage" WHERE ("public"."ClubPackage"."clubId" = $1 AND "public"."ClubPackage"."isActive" = $2) LIMIT $3 OFFSET $4
 GET /c/club-demo-padelyzer/dashboard/bookings 200 in 2269ms
prisma:query COMMIT
 GET /c/club-demo-padelyzer/dashboard/bookings 200 in 2139ms
 GET /favicon.ico 200 in 159ms
 ✓ Compiled in 1031ms (2878 modules)
 ✓ Compiled in 1ms (1879 modules)
 ✓ Compiled in 0ms (1879 modules)
 ✓ Compiled in 1ms (1879 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query DEALLOCATE ALL
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."status"::text, "public"."Club"."active" FROM "public"."Club" WHERE ("public"."Club"."slug" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query COMMIT
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."role"::text, "public"."User"."clubId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."UserPermission"."id", "public"."UserPermission"."moduleCode", "public"."UserPermission"."userId" FROM "public"."UserPermission" WHERE "public"."UserPermission"."userId" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."clubId" = $1 ORDER BY "public"."Court"."order" ASC OFFSET $2
prisma:query BEGIN
prisma:query COMMIT
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubModule"."id", "public"."ClubModule"."clubId", "public"."ClubModule"."moduleId", "public"."ClubModule"."isEnabled", "public"."ClubModule"."enabledAt", "public"."ClubModule"."disabledAt", "public"."ClubModule"."gracePeriodEnd", "public"."ClubModule"."lastExportAt", "public"."ClubModule"."settings", "public"."ClubModule"."createdAt", "public"."ClubModule"."updatedAt" FROM "public"."ClubModule" WHERE ("public"."ClubModule"."clubId" = $1 AND "public"."ClubModule"."isEnabled" = $2) OFFSET $3
prisma:query BEGIN
prisma:query BEGIN
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query DEALLOCATE ALL
prisma:query COMMIT
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query COMMIT
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."timezone" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query COMMIT
prisma:query SELECT "public"."ClubPackage"."id", "public"."ClubPackage"."clubId", "public"."ClubPackage"."packageId", "public"."ClubPackage"."isActive", "public"."ClubPackage"."activatedAt", "public"."ClubPackage"."deactivatedAt", "public"."ClubPackage"."customPricing", "public"."ClubPackage"."notes", "public"."ClubPackage"."createdAt", "public"."ClubPackage"."updatedAt" FROM "public"."ClubPackage" WHERE ("public"."ClubPackage"."clubId" = $1 AND "public"."ClubPackage"."isActive" = $2) LIMIT $3 OFFSET $4
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query COMMIT
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
 GET /c/club-demo-padelyzer/dashboard/bookings 200 in 3815ms
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."slug", "public"."Club"."email", "public"."Club"."phone", "public"."Club"."address", "public"."Club"."city", "public"."Club"."state", "public"."Club"."postalCode", "public"."Club"."country", "public"."Club"."website", "public"."Club"."description", "public"."Club"."logo", "public"."Club"."active", "public"."Club"."status"::text FROM "public"."Club" WHERE ("public"."Club"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_splitPayments", 0) AS "_aggr_count_splitPayments", COALESCE("aggr_selection_1_Payment"."_aggr_count_payments", 0) AS "_aggr_count_payments", COALESCE("aggr_selection_2_Booking"."_aggr_count_bookings", 0) AS "_aggr_count_bookings" FROM "public"."BookingGroup" LEFT JOIN (SELECT "public"."SplitPayment"."bookingGroupId", COUNT(*) AS "_aggr_count_splitPayments" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingGroupId") AS "aggr_selection_0_SplitPayment" ON ("public"."BookingGroup"."id" = "aggr_selection_0_SplitPayment"."bookingGroupId") LEFT JOIN (SELECT "public"."Payment"."bookingGroupId", COUNT(*) AS "_aggr_count_payments" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingGroupId") AS "aggr_selection_1_Payment" ON ("public"."BookingGroup"."id" = "aggr_selection_1_Payment"."bookingGroupId") LEFT JOIN (SELECT "public"."Booking"."bookingGroupId", COUNT(*) AS "_aggr_count_bookings" FROM "public"."Booking" WHERE 1=1 GROUP BY "public"."Booking"."bookingGroupId") AS "aggr_selection_2_Booking" ON ("public"."BookingGroup"."id" = "aggr_selection_2_Booking"."bookingGroupId") WHERE ("public"."BookingGroup"."clubId" = $1 AND "public"."BookingGroup"."date" >= $2 AND "public"."BookingGroup"."date" < $3 AND "public"."BookingGroup"."status" <> CAST($4::text AS "public"."BookingStatus")) ORDER BY "public"."BookingGroup"."date" ASC, "public"."BookingGroup"."startTime" ASC OFFSET $5
prisma:query BEGIN
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
 GET /api/settings/club 200 in 4329ms
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE "public"."Booking"."bookingGroupId" IN ($1,$2) OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
 GET /favicon.ico 200 in 207ms
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2,$3) OFFSET $4
 GET /api/settings/courts 200 in 4569ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingGroupId" IN ($1,$2) OFFSET $3
prisma:query BEGIN
prisma:query COMMIT
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_SplitPayment", 0) AS "_aggr_count_SplitPayment", COALESCE("aggr_selection_1_Payment"."_aggr_count_Payment", 0) AS "_aggr_count_Payment" FROM "public"."Booking" LEFT JOIN (SELECT "public"."SplitPayment"."bookingId", COUNT(*) AS "_aggr_count_SplitPayment" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingId") AS "aggr_selection_0_SplitPayment" ON ("public"."Booking"."id" = "aggr_selection_0_SplitPayment"."bookingId") LEFT JOIN (SELECT "public"."Payment"."bookingId", COUNT(*) AS "_aggr_count_Payment" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingId") AS "aggr_selection_1_Payment" ON ("public"."Booking"."id" = "aggr_selection_1_Payment"."bookingId") WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."date" < $3 AND "public"."Booking"."status" <> CAST($4::text AS "public"."BookingStatus") AND "public"."Booking"."bookingGroupId" IS NULL) ORDER BY "public"."Booking"."date" ASC, "public"."Booking"."startTime" ASC OFFSET $5
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2) OFFSET $3
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingId" IN ($1,$2,$3) OFFSET $4
prisma:query COMMIT
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."PaymentProvider"."id", "public"."PaymentProvider"."clubId", "public"."PaymentProvider"."providerId", "public"."PaymentProvider"."name", "public"."PaymentProvider"."enabled", "public"."PaymentProvider"."config", "public"."PaymentProvider"."fees", "public"."PaymentProvider"."createdAt", "public"."PaymentProvider"."updatedAt" FROM "public"."PaymentProvider" WHERE "public"."PaymentProvider"."clubId" = $1 ORDER BY "public"."PaymentProvider"."createdAt" ASC OFFSET $2
prisma:query SELECT "public"."Class"."id", "public"."Class"."clubId", "public"."Class"."courtId", "public"."Class"."name", "public"."Class"."description", "public"."Class"."instructorId", "public"."Class"."instructorName", "public"."Class"."level"::text, "public"."Class"."type"::text, "public"."Class"."maxStudents", "public"."Class"."enrolledCount", "public"."Class"."price", "public"."Class"."currency", "public"."Class"."date", "public"."Class"."startTime", "public"."Class"."endTime", "public"."Class"."duration", "public"."Class"."status"::text, "public"."Class"."recurring", "public"."Class"."recurringDays", "public"."Class"."notes", "public"."Class"."createdAt", "public"."Class"."updatedAt", "public"."Class"."cancelledAt", COALESCE("aggr_selection_0_ClassEnrollment"."_aggr_count_ClassEnrollment", 0) AS "_aggr_count_ClassEnrollment" FROM "public"."Class" LEFT JOIN (SELECT "public"."ClassEnrollment"."classId", COUNT(*) AS "_aggr_count_ClassEnrollment" FROM "public"."ClassEnrollment" WHERE 1=1 GROUP BY "public"."ClassEnrollment"."classId") AS "aggr_selection_0_ClassEnrollment" ON ("public"."Class"."id" = "aggr_selection_0_ClassEnrollment"."classId") WHERE ("public"."Class"."clubId" = $1 AND "public"."Class"."date" >= $2 AND "public"."Class"."date" < $3 AND "public"."Class"."status" <> CAST($4::text AS "public"."ClassStatus")) ORDER BY "public"."Class"."date" ASC, "public"."Class"."startTime" ASC OFFSET $5
prisma:query COMMIT
 GET /api/bookings?date=2025-09-24 200 in 5788ms
prisma:query COMMIT
 GET /api/settings/payments 200 in 1221ms
 ✓ Compiled in 372ms (999 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."status"::text, "public"."Club"."active" FROM "public"."Club" WHERE ("public"."Club"."slug" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."role"::text, "public"."User"."clubId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."UserPermission"."id", "public"."UserPermission"."moduleCode", "public"."UserPermission"."userId" FROM "public"."UserPermission" WHERE "public"."UserPermission"."userId" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubModule"."id", "public"."ClubModule"."clubId", "public"."ClubModule"."moduleId", "public"."ClubModule"."isEnabled", "public"."ClubModule"."enabledAt", "public"."ClubModule"."disabledAt", "public"."ClubModule"."gracePeriodEnd", "public"."ClubModule"."lastExportAt", "public"."ClubModule"."settings", "public"."ClubModule"."createdAt", "public"."ClubModule"."updatedAt" FROM "public"."ClubModule" WHERE ("public"."ClubModule"."clubId" = $1 AND "public"."ClubModule"."isEnabled" = $2) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubPackage"."id", "public"."ClubPackage"."clubId", "public"."ClubPackage"."packageId", "public"."ClubPackage"."isActive", "public"."ClubPackage"."activatedAt", "public"."ClubPackage"."deactivatedAt", "public"."ClubPackage"."customPricing", "public"."ClubPackage"."notes", "public"."ClubPackage"."createdAt", "public"."ClubPackage"."updatedAt" FROM "public"."ClubPackage" WHERE ("public"."ClubPackage"."clubId" = $1 AND "public"."ClubPackage"."isActive" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
 GET /c/club-demo-padelyzer/dashboard/bookings 200 in 1740ms
 GET /favicon.ico 200 in 75ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query SELECT 1
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[Check Payment] Checking payment for booking: 0c957240-66bb-4154-bead-b27bf94e30f9
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND "public"."Booking"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt" FROM "public"."BookingGroup" WHERE ("public"."BookingGroup"."id" = $1 AND "public"."BookingGroup"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE ("public"."Payment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."Payment"."bookingGroupId" IN ($2)) ORDER BY "public"."Payment"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query COMMIT
 GET /api/bookings/0c957240-66bb-4154-bead-b27bf94e30f9/check-payment 200 in 1398ms
 ✓ Compiled /api/booking-groups/[id] in 425ms (2664 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt" FROM "public"."BookingGroup" WHERE ("public"."BookingGroup"."id" = $1 AND "public"."BookingGroup"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE "public"."Booking"."bookingGroupId" IN ($1) OFFSET $2
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE ("public"."SplitPayment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."SplitPayment"."bookingGroupId" IN ($2)) OFFSET $3
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE ("public"."Payment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."Payment"."bookingGroupId" IN ($2)) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query UPDATE "public"."BookingGroup" SET "status" = CAST($1::text AS "public"."BookingStatus"), "cancelledAt" = $2, "notes" = $3 WHERE ("public"."BookingGroup"."id" = $4 AND 1=1) RETURNING "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt"
prisma:query UPDATE "public"."Booking" SET "status" = CAST($1::text AS "public"."BookingStatus"), "cancelledAt" = $2 WHERE "public"."Booking"."bookingGroupId" = $3
prisma:query UPDATE "public"."SplitPayment" SET "status" = CAST($1::text AS "public"."PaymentStatus") WHERE ("public"."SplitPayment"."bookingGroupId" = $2 AND "public"."SplitPayment"."status" = CAST($3::text AS "public"."PaymentStatus"))
prisma:error 
Invalid `prisma.notification.create()` invocation:

{
  data: {
    bookingGroupId: "0c957240-66bb-4154-bead-b27bf94e30f9",
    type: "WHATSAPP",
    template: "BOOKING_GROUP_CANCELLED",
    recipient: "5549125610",
    status: "pending",
+   id: String
  }
}

Argument `id` is missing.
prisma:query ROLLBACK
file:///Users/ja/v4/bmad-nextjs-app/node_modules/@prisma/client/runtime/library.js: Invalid source map. Only conformant source maps can be used to find the original code. Cause: TypeError [ERR_INVALID_ARG_TYPE]: The "payload" argument must be of type object. Received null
Error cancelling booking group: Error [PrismaClientValidationError]: 
Invalid `prisma.notification.create()` invocation:

{
  data: {
    bookingGroupId: "0c957240-66bb-4154-bead-b27bf94e30f9",
    type: "WHATSAPP",
    template: "BOOKING_GROUP_CANCELLED",
    recipient: "5549125610",
    status: "pending",
+   id: String
  }
}

Argument `id` is missing.
    at async eval (app/api/booking-groups/[id]/route.ts:283:7)
    at async DELETE (app/api/booking-groups/[id]/route.ts:247:20)
  281 |
  282 |       // 4. Create cancellation notification
> 283 |       await tx.notification.create({
      |       ^
  284 |         data: {
  285 |           bookingGroupId,
  286 |           type: 'WHATSAPP', {
  clientVersion: '5.22.0'
}
 DELETE /api/booking-groups/0c957240-66bb-4154-bead-b27bf94e30f9 500 in 3509ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[Check Payment] Checking payment for booking: 7a9493bf-0972-4497-aa38-2ccad5145296
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND "public"."Booking"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE ("public"."Payment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."Payment"."bookingId" IN ($2)) ORDER BY "public"."Payment"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE ("public"."SplitPayment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."SplitPayment"."bookingId" IN ($2)) OFFSET $3
prisma:query COMMIT
 GET /api/bookings/7a9493bf-0972-4497-aa38-2ccad5145296/check-payment 200 in 1120ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query SELECT 1
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt" FROM "public"."BookingGroup" WHERE ("public"."BookingGroup"."id" = $1 AND "public"."BookingGroup"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE "public"."Booking"."bookingGroupId" IN ($1) OFFSET $2
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE ("public"."SplitPayment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."SplitPayment"."bookingGroupId" IN ($2)) OFFSET $3
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE ("public"."Payment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."Payment"."bookingGroupId" IN ($2)) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query UPDATE "public"."BookingGroup" SET "status" = CAST($1::text AS "public"."BookingStatus"), "cancelledAt" = $2, "notes" = $3 WHERE ("public"."BookingGroup"."id" = $4 AND 1=1) RETURNING "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt"
prisma:query UPDATE "public"."Booking" SET "status" = CAST($1::text AS "public"."BookingStatus"), "cancelledAt" = $2 WHERE "public"."Booking"."bookingGroupId" = $3
prisma:query UPDATE "public"."SplitPayment" SET "status" = CAST($1::text AS "public"."PaymentStatus") WHERE ("public"."SplitPayment"."bookingGroupId" = $2 AND "public"."SplitPayment"."status" = CAST($3::text AS "public"."PaymentStatus"))
prisma:error 
Invalid `prisma.notification.create()` invocation:

{
  data: {
    bookingGroupId: "7a9493bf-0972-4497-aa38-2ccad5145296",
    type: "WHATSAPP",
    template: "BOOKING_GROUP_CANCELLED",
    recipient: "+52 222 987 6543",
    status: "pending",
+   id: String
  }
}

Argument `id` is missing.
prisma:query ROLLBACK
file:///Users/ja/v4/bmad-nextjs-app/node_modules/@prisma/client/runtime/library.js: Invalid source map. Only conformant source maps can be used to find the original code. Cause: TypeError [ERR_INVALID_ARG_TYPE]: The "payload" argument must be of type object. Received null
Error cancelling booking group: Error [PrismaClientValidationError]: 
Invalid `prisma.notification.create()` invocation:

{
  data: {
    bookingGroupId: "7a9493bf-0972-4497-aa38-2ccad5145296",
    type: "WHATSAPP",
    template: "BOOKING_GROUP_CANCELLED",
    recipient: "+52 222 987 6543",
    status: "pending",
+   id: String
  }
}

Argument `id` is missing.
    at async eval (app/api/booking-groups/[id]/route.ts:283:7)
    at async DELETE (app/api/booking-groups/[id]/route.ts:247:20)
  281 |
  282 |       // 4. Create cancellation notification
> 283 |       await tx.notification.create({
      |       ^
  284 |         data: {
  285 |           bookingGroupId,
  286 |           type: 'WHATSAPP', {
  clientVersion: '5.22.0'
}
 DELETE /api/booking-groups/7a9493bf-0972-4497-aa38-2ccad5145296 500 in 2033ms
 ✓ Compiled in 697ms (2267 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."status"::text, "public"."Club"."active" FROM "public"."Club" WHERE ("public"."Club"."slug" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."role"::text, "public"."User"."clubId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."UserPermission"."id", "public"."UserPermission"."moduleCode", "public"."UserPermission"."userId" FROM "public"."UserPermission" WHERE "public"."UserPermission"."userId" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubModule"."id", "public"."ClubModule"."clubId", "public"."ClubModule"."moduleId", "public"."ClubModule"."isEnabled", "public"."ClubModule"."enabledAt", "public"."ClubModule"."disabledAt", "public"."ClubModule"."gracePeriodEnd", "public"."ClubModule"."lastExportAt", "public"."ClubModule"."settings", "public"."ClubModule"."createdAt", "public"."ClubModule"."updatedAt" FROM "public"."ClubModule" WHERE ("public"."ClubModule"."clubId" = $1 AND "public"."ClubModule"."isEnabled" = $2) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubPackage"."id", "public"."ClubPackage"."clubId", "public"."ClubPackage"."packageId", "public"."ClubPackage"."isActive", "public"."ClubPackage"."activatedAt", "public"."ClubPackage"."deactivatedAt", "public"."ClubPackage"."customPricing", "public"."ClubPackage"."notes", "public"."ClubPackage"."createdAt", "public"."ClubPackage"."updatedAt" FROM "public"."ClubPackage" WHERE ("public"."ClubPackage"."clubId" = $1 AND "public"."ClubPackage"."isActive" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
 GET /c/club-demo-padelyzer/dashboard/bookings 200 in 2720ms
 ✓ Compiled /favicon.ico in 128ms (1270 modules)
 GET /favicon.ico 200 in 186ms
 ✓ Compiled in 588ms (2267 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."status"::text, "public"."Club"."active" FROM "public"."Club" WHERE ("public"."Club"."slug" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."role"::text, "public"."User"."clubId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."UserPermission"."id", "public"."UserPermission"."moduleCode", "public"."UserPermission"."userId" FROM "public"."UserPermission" WHERE "public"."UserPermission"."userId" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubModule"."id", "public"."ClubModule"."clubId", "public"."ClubModule"."moduleId", "public"."ClubModule"."isEnabled", "public"."ClubModule"."enabledAt", "public"."ClubModule"."disabledAt", "public"."ClubModule"."gracePeriodEnd", "public"."ClubModule"."lastExportAt", "public"."ClubModule"."settings", "public"."ClubModule"."createdAt", "public"."ClubModule"."updatedAt" FROM "public"."ClubModule" WHERE ("public"."ClubModule"."clubId" = $1 AND "public"."ClubModule"."isEnabled" = $2) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubPackage"."id", "public"."ClubPackage"."clubId", "public"."ClubPackage"."packageId", "public"."ClubPackage"."isActive", "public"."ClubPackage"."activatedAt", "public"."ClubPackage"."deactivatedAt", "public"."ClubPackage"."customPricing", "public"."ClubPackage"."notes", "public"."ClubPackage"."createdAt", "public"."ClubPackage"."updatedAt" FROM "public"."ClubPackage" WHERE ("public"."ClubPackage"."clubId" = $1 AND "public"."ClubPackage"."isActive" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
 GET /c/club-demo-padelyzer/dashboard/bookings 200 in 6813ms
 GET /favicon.ico 200 in 68ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query SELECT 1
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT 1
prisma:query BEGIN
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."status"::text, "public"."Club"."active" FROM "public"."Club" WHERE ("public"."Club"."slug" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query DEALLOCATE ALL
prisma:query COMMIT
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."role"::text, "public"."User"."clubId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."UserPermission"."id", "public"."UserPermission"."moduleCode", "public"."UserPermission"."userId" FROM "public"."UserPermission" WHERE "public"."UserPermission"."userId" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubModule"."id", "public"."ClubModule"."clubId", "public"."ClubModule"."moduleId", "public"."ClubModule"."isEnabled", "public"."ClubModule"."enabledAt", "public"."ClubModule"."disabledAt", "public"."ClubModule"."gracePeriodEnd", "public"."ClubModule"."lastExportAt", "public"."ClubModule"."settings", "public"."ClubModule"."createdAt", "public"."ClubModule"."updatedAt" FROM "public"."ClubModule" WHERE ("public"."ClubModule"."clubId" = $1 AND "public"."ClubModule"."isEnabled" = $2) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubPackage"."id", "public"."ClubPackage"."clubId", "public"."ClubPackage"."packageId", "public"."ClubPackage"."isActive", "public"."ClubPackage"."activatedAt", "public"."ClubPackage"."deactivatedAt", "public"."ClubPackage"."customPricing", "public"."ClubPackage"."notes", "public"."ClubPackage"."createdAt", "public"."ClubPackage"."updatedAt" FROM "public"."ClubPackage" WHERE ("public"."ClubPackage"."clubId" = $1 AND "public"."ClubPackage"."isActive" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
 GET /c/club-demo-padelyzer/dashboard/bookings 200 in 2085ms
 ✓ Compiled /api/settings/club in 391ms (1268 modules)
 ✓ Compiled (1674 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
 GET /favicon.ico 200 in 929ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT 1
prisma:query COMMIT
 GET /api/health 200 in 1737ms
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query COMMIT
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."clubId" = $1 ORDER BY "public"."Court"."order" ASC OFFSET $2
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."timezone" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query COMMIT
prisma:query COMMIT
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."slug", "public"."Club"."email", "public"."Club"."phone", "public"."Club"."address", "public"."Club"."city", "public"."Club"."state", "public"."Club"."postalCode", "public"."Club"."country", "public"."Club"."website", "public"."Club"."description", "public"."Club"."logo", "public"."Club"."active", "public"."Club"."status"::text FROM "public"."Club" WHERE ("public"."Club"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
 GET /api/settings/club 200 in 3392ms
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_splitPayments", 0) AS "_aggr_count_splitPayments", COALESCE("aggr_selection_1_Payment"."_aggr_count_payments", 0) AS "_aggr_count_payments", COALESCE("aggr_selection_2_Booking"."_aggr_count_bookings", 0) AS "_aggr_count_bookings" FROM "public"."BookingGroup" LEFT JOIN (SELECT "public"."SplitPayment"."bookingGroupId", COUNT(*) AS "_aggr_count_splitPayments" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingGroupId") AS "aggr_selection_0_SplitPayment" ON ("public"."BookingGroup"."id" = "aggr_selection_0_SplitPayment"."bookingGroupId") LEFT JOIN (SELECT "public"."Payment"."bookingGroupId", COUNT(*) AS "_aggr_count_payments" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingGroupId") AS "aggr_selection_1_Payment" ON ("public"."BookingGroup"."id" = "aggr_selection_1_Payment"."bookingGroupId") LEFT JOIN (SELECT "public"."Booking"."bookingGroupId", COUNT(*) AS "_aggr_count_bookings" FROM "public"."Booking" WHERE 1=1 GROUP BY "public"."Booking"."bookingGroupId") AS "aggr_selection_2_Booking" ON ("public"."BookingGroup"."id" = "aggr_selection_2_Booking"."bookingGroupId") WHERE ("public"."BookingGroup"."clubId" = $1 AND "public"."BookingGroup"."date" >= $2 AND "public"."BookingGroup"."date" < $3 AND "public"."BookingGroup"."status" <> CAST($4::text AS "public"."BookingStatus")) ORDER BY "public"."BookingGroup"."date" ASC, "public"."BookingGroup"."startTime" ASC OFFSET $5
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query COMMIT
prisma:query COMMIT
 ✓ Compiled /api/settings/payments in 159ms (1677 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE "public"."Booking"."bookingGroupId" IN ($1,$2) OFFSET $3
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2,$3) OFFSET $4
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingGroupId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query COMMIT
 GET /api/settings/courts 200 in 5436ms
prisma:query BEGIN
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_SplitPayment", 0) AS "_aggr_count_SplitPayment", COALESCE("aggr_selection_1_Payment"."_aggr_count_Payment", 0) AS "_aggr_count_Payment" FROM "public"."Booking" LEFT JOIN (SELECT "public"."SplitPayment"."bookingId", COUNT(*) AS "_aggr_count_SplitPayment" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingId") AS "aggr_selection_0_SplitPayment" ON ("public"."Booking"."id" = "aggr_selection_0_SplitPayment"."bookingId") LEFT JOIN (SELECT "public"."Payment"."bookingId", COUNT(*) AS "_aggr_count_Payment" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingId") AS "aggr_selection_1_Payment" ON ("public"."Booking"."id" = "aggr_selection_1_Payment"."bookingId") WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."date" < $3 AND "public"."Booking"."status" <> CAST($4::text AS "public"."BookingStatus") AND "public"."Booking"."bookingGroupId" IS NULL) ORDER BY "public"."Booking"."date" ASC, "public"."Booking"."startTime" ASC OFFSET $5
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2) OFFSET $3
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."clubId" = $1 ORDER BY "public"."Court"."order" ASC OFFSET $2
prisma:query COMMIT
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query COMMIT
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."PaymentProvider"."id", "public"."PaymentProvider"."clubId", "public"."PaymentProvider"."providerId", "public"."PaymentProvider"."name", "public"."PaymentProvider"."enabled", "public"."PaymentProvider"."config", "public"."PaymentProvider"."fees", "public"."PaymentProvider"."createdAt", "public"."PaymentProvider"."updatedAt" FROM "public"."PaymentProvider" WHERE "public"."PaymentProvider"."clubId" = $1 ORDER BY "public"."PaymentProvider"."createdAt" ASC OFFSET $2
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query COMMIT
prisma:query COMMIT
 GET /api/settings/payments 200 in 4978ms
prisma:query BEGIN
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query COMMIT
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query DEALLOCATE ALL
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query BEGIN
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
 GET /api/settings/courts 200 in 3102ms
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."slug", "public"."Club"."email", "public"."Club"."phone", "public"."Club"."address", "public"."Club"."city", "public"."Club"."state", "public"."Club"."postalCode", "public"."Club"."country", "public"."Club"."website", "public"."Club"."description", "public"."Club"."logo", "public"."Club"."active", "public"."Club"."status"::text FROM "public"."Club" WHERE ("public"."Club"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
 GET /api/settings/club 200 in 5526ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query SELECT "public"."Class"."id", "public"."Class"."clubId", "public"."Class"."courtId", "public"."Class"."name", "public"."Class"."description", "public"."Class"."instructorId", "public"."Class"."instructorName", "public"."Class"."level"::text, "public"."Class"."type"::text, "public"."Class"."maxStudents", "public"."Class"."enrolledCount", "public"."Class"."price", "public"."Class"."currency", "public"."Class"."date", "public"."Class"."startTime", "public"."Class"."endTime", "public"."Class"."duration", "public"."Class"."status"::text, "public"."Class"."recurring", "public"."Class"."recurringDays", "public"."Class"."notes", "public"."Class"."createdAt", "public"."Class"."updatedAt", "public"."Class"."cancelledAt", COALESCE("aggr_selection_0_ClassEnrollment"."_aggr_count_ClassEnrollment", 0) AS "_aggr_count_ClassEnrollment" FROM "public"."Class" LEFT JOIN (SELECT "public"."ClassEnrollment"."classId", COUNT(*) AS "_aggr_count_ClassEnrollment" FROM "public"."ClassEnrollment" WHERE 1=1 GROUP BY "public"."ClassEnrollment"."classId") AS "aggr_selection_0_ClassEnrollment" ON ("public"."Class"."id" = "aggr_selection_0_ClassEnrollment"."classId") WHERE ("public"."Class"."clubId" = $1 AND "public"."Class"."date" >= $2 AND "public"."Class"."date" < $3 AND "public"."Class"."status" <> CAST($4::text AS "public"."ClassStatus")) ORDER BY "public"."Class"."date" ASC, "public"."Class"."startTime" ASC OFFSET $5
prisma:query BEGIN
prisma:query COMMIT
 GET /api/bookings?date=2025-09-24 200 in 9121ms
prisma:query DEALLOCATE ALL
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query COMMIT
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."PaymentProvider"."id", "public"."PaymentProvider"."clubId", "public"."PaymentProvider"."providerId", "public"."PaymentProvider"."name", "public"."PaymentProvider"."enabled", "public"."PaymentProvider"."config", "public"."PaymentProvider"."fees", "public"."PaymentProvider"."createdAt", "public"."PaymentProvider"."updatedAt" FROM "public"."PaymentProvider" WHERE "public"."PaymentProvider"."clubId" = $1 ORDER BY "public"."PaymentProvider"."createdAt" ASC OFFSET $2
prisma:query DEALLOCATE ALL
prisma:query COMMIT
 GET /api/settings/payments 200 in 1303ms
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."timezone" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_splitPayments", 0) AS "_aggr_count_splitPayments", COALESCE("aggr_selection_1_Payment"."_aggr_count_payments", 0) AS "_aggr_count_payments", COALESCE("aggr_selection_2_Booking"."_aggr_count_bookings", 0) AS "_aggr_count_bookings" FROM "public"."BookingGroup" LEFT JOIN (SELECT "public"."SplitPayment"."bookingGroupId", COUNT(*) AS "_aggr_count_splitPayments" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingGroupId") AS "aggr_selection_0_SplitPayment" ON ("public"."BookingGroup"."id" = "aggr_selection_0_SplitPayment"."bookingGroupId") LEFT JOIN (SELECT "public"."Payment"."bookingGroupId", COUNT(*) AS "_aggr_count_payments" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingGroupId") AS "aggr_selection_1_Payment" ON ("public"."BookingGroup"."id" = "aggr_selection_1_Payment"."bookingGroupId") LEFT JOIN (SELECT "public"."Booking"."bookingGroupId", COUNT(*) AS "_aggr_count_bookings" FROM "public"."Booking" WHERE 1=1 GROUP BY "public"."Booking"."bookingGroupId") AS "aggr_selection_2_Booking" ON ("public"."BookingGroup"."id" = "aggr_selection_2_Booking"."bookingGroupId") WHERE ("public"."BookingGroup"."clubId" = $1 AND "public"."BookingGroup"."date" >= $2 AND "public"."BookingGroup"."date" < $3 AND "public"."BookingGroup"."status" <> CAST($4::text AS "public"."BookingStatus")) ORDER BY "public"."BookingGroup"."date" ASC, "public"."BookingGroup"."startTime" ASC OFFSET $5
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE "public"."Booking"."bookingGroupId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingGroupId" IN ($1,$2) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_SplitPayment", 0) AS "_aggr_count_SplitPayment", COALESCE("aggr_selection_1_Payment"."_aggr_count_Payment", 0) AS "_aggr_count_Payment" FROM "public"."Booking" LEFT JOIN (SELECT "public"."SplitPayment"."bookingId", COUNT(*) AS "_aggr_count_SplitPayment" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingId") AS "aggr_selection_0_SplitPayment" ON ("public"."Booking"."id" = "aggr_selection_0_SplitPayment"."bookingId") LEFT JOIN (SELECT "public"."Payment"."bookingId", COUNT(*) AS "_aggr_count_Payment" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingId") AS "aggr_selection_1_Payment" ON ("public"."Booking"."id" = "aggr_selection_1_Payment"."bookingId") WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."date" < $3 AND "public"."Booking"."status" <> CAST($4::text AS "public"."BookingStatus") AND "public"."Booking"."bookingGroupId" IS NULL) ORDER BY "public"."Booking"."date" ASC, "public"."Booking"."startTime" ASC OFFSET $5
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingId" IN ($1,$2,$3) OFFSET $4
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Class"."id", "public"."Class"."clubId", "public"."Class"."courtId", "public"."Class"."name", "public"."Class"."description", "public"."Class"."instructorId", "public"."Class"."instructorName", "public"."Class"."level"::text, "public"."Class"."type"::text, "public"."Class"."maxStudents", "public"."Class"."enrolledCount", "public"."Class"."price", "public"."Class"."currency", "public"."Class"."date", "public"."Class"."startTime", "public"."Class"."endTime", "public"."Class"."duration", "public"."Class"."status"::text, "public"."Class"."recurring", "public"."Class"."recurringDays", "public"."Class"."notes", "public"."Class"."createdAt", "public"."Class"."updatedAt", "public"."Class"."cancelledAt", COALESCE("aggr_selection_0_ClassEnrollment"."_aggr_count_ClassEnrollment", 0) AS "_aggr_count_ClassEnrollment" FROM "public"."Class" LEFT JOIN (SELECT "public"."ClassEnrollment"."classId", COUNT(*) AS "_aggr_count_ClassEnrollment" FROM "public"."ClassEnrollment" WHERE 1=1 GROUP BY "public"."ClassEnrollment"."classId") AS "aggr_selection_0_ClassEnrollment" ON ("public"."Class"."id" = "aggr_selection_0_ClassEnrollment"."classId") WHERE ("public"."Class"."clubId" = $1 AND "public"."Class"."date" >= $2 AND "public"."Class"."date" < $3 AND "public"."Class"."status" <> CAST($4::text AS "public"."ClassStatus")) ORDER BY "public"."Class"."date" ASC, "public"."Class"."startTime" ASC OFFSET $5
prisma:query COMMIT
 GET /api/bookings?date=2025-09-24 200 in 4837ms
 ✓ Compiled /api/bookings/[id]/check-payment in 207ms (1679 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[Check Payment] Checking payment for booking: 0c957240-66bb-4154-bead-b27bf94e30f9
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND "public"."Booking"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt" FROM "public"."BookingGroup" WHERE ("public"."BookingGroup"."id" = $1 AND "public"."BookingGroup"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE ("public"."Payment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."Payment"."bookingGroupId" IN ($2)) ORDER BY "public"."Payment"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query COMMIT
 GET /api/bookings/0c957240-66bb-4154-bead-b27bf94e30f9/check-payment 200 in 3199ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[Check Payment] Checking payment for booking: 7a9493bf-0972-4497-aa38-2ccad5145296
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND "public"."Booking"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE ("public"."Payment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."Payment"."bookingId" IN ($2)) ORDER BY "public"."Payment"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE ("public"."SplitPayment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."SplitPayment"."bookingId" IN ($2)) OFFSET $3
prisma:query COMMIT
 GET /api/bookings/7a9493bf-0972-4497-aa38-2ccad5145296/check-payment 200 in 1559ms
 ✓ Compiled /api/booking-groups/[id] in 480ms (1681 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt" FROM "public"."BookingGroup" WHERE ("public"."BookingGroup"."id" = $1 AND "public"."BookingGroup"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE "public"."Booking"."bookingGroupId" IN ($1) OFFSET $2
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt" FROM "public"."SplitPayment" WHERE ("public"."SplitPayment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."SplitPayment"."bookingGroupId" IN ($2)) OFFSET $3
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE ("public"."Payment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."Payment"."bookingGroupId" IN ($2)) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query UPDATE "public"."BookingGroup" SET "status" = CAST($1::text AS "public"."BookingStatus"), "cancelledAt" = $2, "notes" = $3 WHERE ("public"."BookingGroup"."id" = $4 AND 1=1) RETURNING "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt"
prisma:query UPDATE "public"."Booking" SET "status" = CAST($1::text AS "public"."BookingStatus"), "cancelledAt" = $2 WHERE "public"."Booking"."bookingGroupId" = $3
prisma:query UPDATE "public"."SplitPayment" SET "status" = CAST($1::text AS "public"."PaymentStatus") WHERE ("public"."SplitPayment"."bookingGroupId" = $2 AND "public"."SplitPayment"."status" = CAST($3::text AS "public"."PaymentStatus"))
prisma:error 
Invalid `prisma.notification.create()` invocation:

{
  data: {
    bookingId: "4460e364-6ef7-43b0-a114-2325cc24d36c",
    type: "WHATSAPP",
    template: "BOOKING_CANCELLED",
    recipient: "+52 222 987 6543",
    status: "pending",
+   id: String
  }
}

Argument `id` is missing.
prisma:query ROLLBACK
file:///Users/ja/v4/bmad-nextjs-app/node_modules/@prisma/client/runtime/library.js: Invalid source map. Only conformant source maps can be used to find the original code. Cause: TypeError [ERR_INVALID_ARG_TYPE]: The "payload" argument must be of type object. Received null
Error cancelling booking group: Error [PrismaClientValidationError]: 
Invalid `prisma.notification.create()` invocation:

{
  data: {
    bookingId: "4460e364-6ef7-43b0-a114-2325cc24d36c",
    type: "WHATSAPP",
    template: "BOOKING_CANCELLED",
    recipient: "+52 222 987 6543",
    status: "pending",
+   id: String
  }
}

Argument `id` is missing.
    at async eval (app/api/booking-groups/[id]/route.ts:285:9)
    at async DELETE (app/api/booking-groups/[id]/route.ts:247:20)
  283 |       // Since notifications are linked to individual bookings, we create one for each
  284 |       for (const booking of bookingGroup.bookings) {
> 285 |         await tx.notification.create({
      |         ^
  286 |           data: {
  287 |             bookingId: booking.id,
  288 |             type: 'WHATSAPP', {
  clientVersion: '5.22.0'
}
 DELETE /api/booking-groups/7a9493bf-0972-4497-aa38-2ccad5145296 500 in 4047ms
 ✓ Compiled in 1765ms (999 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query SELECT 1
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."status"::text, "public"."Club"."active" FROM "public"."Club" WHERE ("public"."Club"."slug" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."role"::text, "public"."User"."clubId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."UserPermission"."id", "public"."UserPermission"."moduleCode", "public"."UserPermission"."userId" FROM "public"."UserPermission" WHERE "public"."UserPermission"."userId" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubModule"."id", "public"."ClubModule"."clubId", "public"."ClubModule"."moduleId", "public"."ClubModule"."isEnabled", "public"."ClubModule"."enabledAt", "public"."ClubModule"."disabledAt", "public"."ClubModule"."gracePeriodEnd", "public"."ClubModule"."lastExportAt", "public"."ClubModule"."settings", "public"."ClubModule"."createdAt", "public"."ClubModule"."updatedAt" FROM "public"."ClubModule" WHERE ("public"."ClubModule"."clubId" = $1 AND "public"."ClubModule"."isEnabled" = $2) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubPackage"."id", "public"."ClubPackage"."clubId", "public"."ClubPackage"."packageId", "public"."ClubPackage"."isActive", "public"."ClubPackage"."activatedAt", "public"."ClubPackage"."deactivatedAt", "public"."ClubPackage"."customPricing", "public"."ClubPackage"."notes", "public"."ClubPackage"."createdAt", "public"."ClubPackage"."updatedAt" FROM "public"."ClubPackage" WHERE ("public"."ClubPackage"."clubId" = $1 AND "public"."ClubPackage"."isActive" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
 GET /c/club-demo-padelyzer/dashboard/bookings 200 in 2328ms
 GET /favicon.ico 200 in 65ms
 ✓ Compiled in 412ms (999 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."status"::text, "public"."Club"."active" FROM "public"."Club" WHERE ("public"."Club"."slug" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."role"::text, "public"."User"."clubId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."UserPermission"."id", "public"."UserPermission"."moduleCode", "public"."UserPermission"."userId" FROM "public"."UserPermission" WHERE "public"."UserPermission"."userId" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubModule"."id", "public"."ClubModule"."clubId", "public"."ClubModule"."moduleId", "public"."ClubModule"."isEnabled", "public"."ClubModule"."enabledAt", "public"."ClubModule"."disabledAt", "public"."ClubModule"."gracePeriodEnd", "public"."ClubModule"."lastExportAt", "public"."ClubModule"."settings", "public"."ClubModule"."createdAt", "public"."ClubModule"."updatedAt" FROM "public"."ClubModule" WHERE ("public"."ClubModule"."clubId" = $1 AND "public"."ClubModule"."isEnabled" = $2) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubPackage"."id", "public"."ClubPackage"."clubId", "public"."ClubPackage"."packageId", "public"."ClubPackage"."isActive", "public"."ClubPackage"."activatedAt", "public"."ClubPackage"."deactivatedAt", "public"."ClubPackage"."customPricing", "public"."ClubPackage"."notes", "public"."ClubPackage"."createdAt", "public"."ClubPackage"."updatedAt" FROM "public"."ClubPackage" WHERE ("public"."ClubPackage"."clubId" = $1 AND "public"."ClubPackage"."isActive" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
 GET /c/club-demo-padelyzer/dashboard/bookings 200 in 1928ms
 GET /favicon.ico 200 in 57ms
 ✓ Compiled in 399ms (999 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."status"::text, "public"."Club"."active" FROM "public"."Club" WHERE ("public"."Club"."slug" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."role"::text, "public"."User"."clubId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."UserPermission"."id", "public"."UserPermission"."moduleCode", "public"."UserPermission"."userId" FROM "public"."UserPermission" WHERE "public"."UserPermission"."userId" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubModule"."id", "public"."ClubModule"."clubId", "public"."ClubModule"."moduleId", "public"."ClubModule"."isEnabled", "public"."ClubModule"."enabledAt", "public"."ClubModule"."disabledAt", "public"."ClubModule"."gracePeriodEnd", "public"."ClubModule"."lastExportAt", "public"."ClubModule"."settings", "public"."ClubModule"."createdAt", "public"."ClubModule"."updatedAt" FROM "public"."ClubModule" WHERE ("public"."ClubModule"."clubId" = $1 AND "public"."ClubModule"."isEnabled" = $2) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubPackage"."id", "public"."ClubPackage"."clubId", "public"."ClubPackage"."packageId", "public"."ClubPackage"."isActive", "public"."ClubPackage"."activatedAt", "public"."ClubPackage"."deactivatedAt", "public"."ClubPackage"."customPricing", "public"."ClubPackage"."notes", "public"."ClubPackage"."createdAt", "public"."ClubPackage"."updatedAt" FROM "public"."ClubPackage" WHERE ("public"."ClubPackage"."clubId" = $1 AND "public"."ClubPackage"."isActive" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
 GET /c/club-demo-padelyzer/dashboard/bookings 200 in 1772ms
 GET /favicon.ico 200 in 97ms
 ✓ Compiled in 302ms (999 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."status"::text, "public"."Club"."active" FROM "public"."Club" WHERE ("public"."Club"."slug" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."role"::text, "public"."User"."clubId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."UserPermission"."id", "public"."UserPermission"."moduleCode", "public"."UserPermission"."userId" FROM "public"."UserPermission" WHERE "public"."UserPermission"."userId" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubModule"."id", "public"."ClubModule"."clubId", "public"."ClubModule"."moduleId", "public"."ClubModule"."isEnabled", "public"."ClubModule"."enabledAt", "public"."ClubModule"."disabledAt", "public"."ClubModule"."gracePeriodEnd", "public"."ClubModule"."lastExportAt", "public"."ClubModule"."settings", "public"."ClubModule"."createdAt", "public"."ClubModule"."updatedAt" FROM "public"."ClubModule" WHERE ("public"."ClubModule"."clubId" = $1 AND "public"."ClubModule"."isEnabled" = $2) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubPackage"."id", "public"."ClubPackage"."clubId", "public"."ClubPackage"."packageId", "public"."ClubPackage"."isActive", "public"."ClubPackage"."activatedAt", "public"."ClubPackage"."deactivatedAt", "public"."ClubPackage"."customPricing", "public"."ClubPackage"."notes", "public"."ClubPackage"."createdAt", "public"."ClubPackage"."updatedAt" FROM "public"."ClubPackage" WHERE ("public"."ClubPackage"."clubId" = $1 AND "public"."ClubPackage"."isActive" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
 GET /c/club-demo-padelyzer/dashboard/bookings 200 in 1715ms
 GET /favicon.ico 200 in 111ms
 ✓ Compiled in 397ms (999 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."status"::text, "public"."Club"."active" FROM "public"."Club" WHERE ("public"."Club"."slug" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."role"::text, "public"."User"."clubId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."UserPermission"."id", "public"."UserPermission"."moduleCode", "public"."UserPermission"."userId" FROM "public"."UserPermission" WHERE "public"."UserPermission"."userId" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubModule"."id", "public"."ClubModule"."clubId", "public"."ClubModule"."moduleId", "public"."ClubModule"."isEnabled", "public"."ClubModule"."enabledAt", "public"."ClubModule"."disabledAt", "public"."ClubModule"."gracePeriodEnd", "public"."ClubModule"."lastExportAt", "public"."ClubModule"."settings", "public"."ClubModule"."createdAt", "public"."ClubModule"."updatedAt" FROM "public"."ClubModule" WHERE ("public"."ClubModule"."clubId" = $1 AND "public"."ClubModule"."isEnabled" = $2) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubPackage"."id", "public"."ClubPackage"."clubId", "public"."ClubPackage"."packageId", "public"."ClubPackage"."isActive", "public"."ClubPackage"."activatedAt", "public"."ClubPackage"."deactivatedAt", "public"."ClubPackage"."customPricing", "public"."ClubPackage"."notes", "public"."ClubPackage"."createdAt", "public"."ClubPackage"."updatedAt" FROM "public"."ClubPackage" WHERE ("public"."ClubPackage"."clubId" = $1 AND "public"."ClubPackage"."isActive" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
 GET /c/club-demo-padelyzer/dashboard/bookings 200 in 1756ms
 GET /favicon.ico 200 in 48ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query BEGIN
prisma:query COMMIT
prisma:query DEALLOCATE ALL
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[Check Payment] Checking payment for booking: 0c957240-66bb-4154-bead-b27bf94e30f9
prisma:query BEGIN
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."status"::text, "public"."Club"."active" FROM "public"."Club" WHERE ("public"."Club"."slug" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query DEALLOCATE ALL
prisma:query COMMIT
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."role"::text, "public"."User"."clubId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE ("public"."Booking"."id" = $1 AND "public"."Booking"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
prisma:query SELECT "public"."UserPermission"."id", "public"."UserPermission"."moduleCode", "public"."UserPermission"."userId" FROM "public"."UserPermission" WHERE "public"."UserPermission"."userId" IN ($1) OFFSET $2
prisma:query BEGIN
prisma:query COMMIT
prisma:query DEALLOCATE ALL
 GET /c/club-demo-padelyzer/dashboard/bookings 200 in 1201ms
prisma:query BEGIN
prisma:query DEALLOCATE ALL
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt" FROM "public"."BookingGroup" WHERE ("public"."BookingGroup"."id" = $1 AND "public"."BookingGroup"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query BEGIN
prisma:query SELECT "public"."ClubModule"."id", "public"."ClubModule"."clubId", "public"."ClubModule"."moduleId", "public"."ClubModule"."isEnabled", "public"."ClubModule"."enabledAt", "public"."ClubModule"."disabledAt", "public"."ClubModule"."gracePeriodEnd", "public"."ClubModule"."lastExportAt", "public"."ClubModule"."settings", "public"."ClubModule"."createdAt", "public"."ClubModule"."updatedAt" FROM "public"."ClubModule" WHERE ("public"."ClubModule"."clubId" = $1 AND "public"."ClubModule"."isEnabled" = $2) OFFSET $3
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Payment"."id", "public"."Payment"."bookingId", "public"."Payment"."amount", "public"."Payment"."currency", "public"."Payment"."method"::text, "public"."Payment"."status"::text, "public"."Payment"."stripePaymentIntentId", "public"."Payment"."stripeChargeId", "public"."Payment"."stripeApplicationFee", "public"."Payment"."stripeTransferId", "public"."Payment"."createdAt", "public"."Payment"."updatedAt", "public"."Payment"."completedAt", "public"."Payment"."bookingGroupId" FROM "public"."Payment" WHERE ("public"."Payment"."status" = CAST($1::text AS "public"."PaymentStatus") AND "public"."Payment"."bookingGroupId" IN ($2)) ORDER BY "public"."Payment"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query COMMIT
prisma:query COMMIT
 GET /api/bookings/0c957240-66bb-4154-bead-b27bf94e30f9/check-payment 200 in 1849ms
prisma:query BEGIN
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."status"::text, "public"."Club"."active" FROM "public"."Club" WHERE ("public"."Club"."slug" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query DEALLOCATE ALL
prisma:query COMMIT
prisma:query SELECT "public"."ClubPackage"."id", "public"."ClubPackage"."clubId", "public"."ClubPackage"."packageId", "public"."ClubPackage"."isActive", "public"."ClubPackage"."activatedAt", "public"."ClubPackage"."deactivatedAt", "public"."ClubPackage"."customPricing", "public"."ClubPackage"."notes", "public"."ClubPackage"."createdAt", "public"."ClubPackage"."updatedAt" FROM "public"."ClubPackage" WHERE ("public"."ClubPackage"."clubId" = $1 AND "public"."ClubPackage"."isActive" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."role"::text, "public"."User"."clubId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."UserPermission"."id", "public"."UserPermission"."moduleCode", "public"."UserPermission"."userId" FROM "public"."UserPermission" WHERE "public"."UserPermission"."userId" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubModule"."id", "public"."ClubModule"."clubId", "public"."ClubModule"."moduleId", "public"."ClubModule"."isEnabled", "public"."ClubModule"."enabledAt", "public"."ClubModule"."disabledAt", "public"."ClubModule"."gracePeriodEnd", "public"."ClubModule"."lastExportAt", "public"."ClubModule"."settings", "public"."ClubModule"."createdAt", "public"."ClubModule"."updatedAt" FROM "public"."ClubModule" WHERE ("public"."ClubModule"."clubId" = $1 AND "public"."ClubModule"."isEnabled" = $2) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubPackage"."id", "public"."ClubPackage"."clubId", "public"."ClubPackage"."packageId", "public"."ClubPackage"."isActive", "public"."ClubPackage"."activatedAt", "public"."ClubPackage"."deactivatedAt", "public"."ClubPackage"."customPricing", "public"."ClubPackage"."notes", "public"."ClubPackage"."createdAt", "public"."ClubPackage"."updatedAt" FROM "public"."ClubPackage" WHERE ("public"."ClubPackage"."clubId" = $1 AND "public"."ClubPackage"."isActive" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
 GET /c/club-demo-padelyzer/dashboard/bookings 200 in 2153ms
 GET /favicon.ico 200 in 84ms
prisma:query BEGIN
prisma:query DEALLOCATE ALL
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query SELECT 1
 GET /api/health 200 in 400ms
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query COMMIT
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."timezone" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."clubId" = $1 ORDER BY "public"."Court"."order" ASC OFFSET $2
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_splitPayments", 0) AS "_aggr_count_splitPayments", COALESCE("aggr_selection_1_Payment"."_aggr_count_payments", 0) AS "_aggr_count_payments", COALESCE("aggr_selection_2_Booking"."_aggr_count_bookings", 0) AS "_aggr_count_bookings" FROM "public"."BookingGroup" LEFT JOIN (SELECT "public"."SplitPayment"."bookingGroupId", COUNT(*) AS "_aggr_count_splitPayments" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingGroupId") AS "aggr_selection_0_SplitPayment" ON ("public"."BookingGroup"."id" = "aggr_selection_0_SplitPayment"."bookingGroupId") LEFT JOIN (SELECT "public"."Payment"."bookingGroupId", COUNT(*) AS "_aggr_count_payments" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingGroupId") AS "aggr_selection_1_Payment" ON ("public"."BookingGroup"."id" = "aggr_selection_1_Payment"."bookingGroupId") LEFT JOIN (SELECT "public"."Booking"."bookingGroupId", COUNT(*) AS "_aggr_count_bookings" FROM "public"."Booking" WHERE 1=1 GROUP BY "public"."Booking"."bookingGroupId") AS "aggr_selection_2_Booking" ON ("public"."BookingGroup"."id" = "aggr_selection_2_Booking"."bookingGroupId") WHERE ("public"."BookingGroup"."clubId" = $1 AND "public"."BookingGroup"."date" >= $2 AND "public"."BookingGroup"."date" < $3 AND "public"."BookingGroup"."status" <> CAST($4::text AS "public"."BookingStatus")) ORDER BY "public"."BookingGroup"."date" ASC, "public"."BookingGroup"."startTime" ASC OFFSET $5
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE "public"."Booking"."bookingGroupId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2,$3) OFFSET $4
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingGroupId" IN ($1,$2) OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query COMMIT
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."slug", "public"."Club"."email", "public"."Club"."phone", "public"."Club"."address", "public"."Club"."city", "public"."Club"."state", "public"."Club"."postalCode", "public"."Club"."country", "public"."Club"."website", "public"."Club"."description", "public"."Club"."logo", "public"."Club"."active", "public"."Club"."status"::text FROM "public"."Club" WHERE ("public"."Club"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query BEGIN
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query COMMIT
 GET /api/settings/club 200 in 1828ms
prisma:query COMMIT
 GET /api/settings/courts 200 in 1902ms
prisma:query DEALLOCATE ALL
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_SplitPayment", 0) AS "_aggr_count_SplitPayment", COALESCE("aggr_selection_1_Payment"."_aggr_count_Payment", 0) AS "_aggr_count_Payment" FROM "public"."Booking" LEFT JOIN (SELECT "public"."SplitPayment"."bookingId", COUNT(*) AS "_aggr_count_SplitPayment" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingId") AS "aggr_selection_0_SplitPayment" ON ("public"."Booking"."id" = "aggr_selection_0_SplitPayment"."bookingId") LEFT JOIN (SELECT "public"."Payment"."bookingId", COUNT(*) AS "_aggr_count_Payment" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingId") AS "aggr_selection_1_Payment" ON ("public"."Booking"."id" = "aggr_selection_1_Payment"."bookingId") WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."date" < $3 AND "public"."Booking"."status" <> CAST($4::text AS "public"."BookingStatus") AND "public"."Booking"."bookingGroupId" IS NULL) ORDER BY "public"."Booking"."date" ASC, "public"."Booking"."startTime" ASC OFFSET $5
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Class"."id", "public"."Class"."clubId", "public"."Class"."courtId", "public"."Class"."name", "public"."Class"."description", "public"."Class"."instructorId", "public"."Class"."instructorName", "public"."Class"."level"::text, "public"."Class"."type"::text, "public"."Class"."maxStudents", "public"."Class"."enrolledCount", "public"."Class"."price", "public"."Class"."currency", "public"."Class"."date", "public"."Class"."startTime", "public"."Class"."endTime", "public"."Class"."duration", "public"."Class"."status"::text, "public"."Class"."recurring", "public"."Class"."recurringDays", "public"."Class"."notes", "public"."Class"."createdAt", "public"."Class"."updatedAt", "public"."Class"."cancelledAt", COALESCE("aggr_selection_0_ClassEnrollment"."_aggr_count_ClassEnrollment", 0) AS "_aggr_count_ClassEnrollment" FROM "public"."Class" LEFT JOIN (SELECT "public"."ClassEnrollment"."classId", COUNT(*) AS "_aggr_count_ClassEnrollment" FROM "public"."ClassEnrollment" WHERE 1=1 GROUP BY "public"."ClassEnrollment"."classId") AS "aggr_selection_0_ClassEnrollment" ON ("public"."Class"."id" = "aggr_selection_0_ClassEnrollment"."classId") WHERE ("public"."Class"."clubId" = $1 AND "public"."Class"."date" >= $2 AND "public"."Class"."date" < $3 AND "public"."Class"."status" <> CAST($4::text AS "public"."ClassStatus")) ORDER BY "public"."Class"."date" ASC, "public"."Class"."startTime" ASC OFFSET $5
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."clubId" = $1 ORDER BY "public"."Court"."order" ASC OFFSET $2
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
 GET /api/bookings?date=2025-09-24 200 in 2751ms
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."slug", "public"."Club"."email", "public"."Club"."phone", "public"."Club"."address", "public"."Club"."city", "public"."Club"."state", "public"."Club"."postalCode", "public"."Club"."country", "public"."Club"."website", "public"."Club"."description", "public"."Club"."logo", "public"."Club"."active", "public"."Club"."status"::text FROM "public"."Club" WHERE ("public"."Club"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT "public"."PaymentProvider"."id", "public"."PaymentProvider"."clubId", "public"."PaymentProvider"."providerId", "public"."PaymentProvider"."name", "public"."PaymentProvider"."enabled", "public"."PaymentProvider"."config", "public"."PaymentProvider"."fees", "public"."PaymentProvider"."createdAt", "public"."PaymentProvider"."updatedAt" FROM "public"."PaymentProvider" WHERE "public"."PaymentProvider"."clubId" = $1 ORDER BY "public"."PaymentProvider"."createdAt" ASC OFFSET $2
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."status" <> CAST($2::text AS "public"."BookingStatus")) OFFSET $3) AS "sub"
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
prisma:query COMMIT
 GET /api/settings/club 200 in 1307ms
 GET /api/settings/payments 200 in 1310ms
prisma:query COMMIT
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query BEGIN
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query DEALLOCATE ALL
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) FROM (SELECT "public"."Booking"."id" FROM "public"."Booking" WHERE ("public"."Booking"."courtId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."status" IN (CAST($3::text AS "public"."BookingStatus"),CAST($4::text AS "public"."BookingStatus"))) OFFSET $5) AS "sub"
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."timezone" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query COMMIT
 GET /api/settings/courts 200 in 1672ms
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_splitPayments", 0) AS "_aggr_count_splitPayments", COALESCE("aggr_selection_1_Payment"."_aggr_count_payments", 0) AS "_aggr_count_payments", COALESCE("aggr_selection_2_Booking"."_aggr_count_bookings", 0) AS "_aggr_count_bookings" FROM "public"."BookingGroup" LEFT JOIN (SELECT "public"."SplitPayment"."bookingGroupId", COUNT(*) AS "_aggr_count_splitPayments" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingGroupId") AS "aggr_selection_0_SplitPayment" ON ("public"."BookingGroup"."id" = "aggr_selection_0_SplitPayment"."bookingGroupId") LEFT JOIN (SELECT "public"."Payment"."bookingGroupId", COUNT(*) AS "_aggr_count_payments" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingGroupId") AS "aggr_selection_1_Payment" ON ("public"."BookingGroup"."id" = "aggr_selection_1_Payment"."bookingGroupId") LEFT JOIN (SELECT "public"."Booking"."bookingGroupId", COUNT(*) AS "_aggr_count_bookings" FROM "public"."Booking" WHERE 1=1 GROUP BY "public"."Booking"."bookingGroupId") AS "aggr_selection_2_Booking" ON ("public"."BookingGroup"."id" = "aggr_selection_2_Booking"."bookingGroupId") WHERE ("public"."BookingGroup"."clubId" = $1 AND "public"."BookingGroup"."date" >= $2 AND "public"."BookingGroup"."date" < $3 AND "public"."BookingGroup"."status" <> CAST($4::text AS "public"."BookingStatus")) ORDER BY "public"."BookingGroup"."date" ASC, "public"."BookingGroup"."startTime" ASC OFFSET $5
prisma:query SELECT "public"."ClubSettings"."id", "public"."ClubSettings"."clubId", "public"."ClubSettings"."slotDuration", "public"."ClubSettings"."bufferTime", "public"."ClubSettings"."advanceBookingDays", "public"."ClubSettings"."allowSameDayBooking", "public"."ClubSettings"."currency", "public"."ClubSettings"."taxIncluded", "public"."ClubSettings"."taxRate", "public"."ClubSettings"."cancellationFee", "public"."ClubSettings"."noShowFee", "public"."ClubSettings"."createdAt", "public"."ClubSettings"."updatedAt", "public"."ClubSettings"."operatingHours", "public"."ClubSettings"."timezone", "public"."ClubSettings"."acceptCash", "public"."ClubSettings"."accountHolder", "public"."ClubSettings"."accountNumber", "public"."ClubSettings"."bankName", "public"."ClubSettings"."clabe", "public"."ClubSettings"."terminalEnabled", "public"."ClubSettings"."terminalId", "public"."ClubSettings"."transferEnabled" FROM "public"."ClubSettings" WHERE ("public"."ClubSettings"."clubId" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId" FROM "public"."Booking" WHERE "public"."Booking"."bookingGroupId" IN ($1,$2) OFFSET $3
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."PaymentProvider"."id", "public"."PaymentProvider"."clubId", "public"."PaymentProvider"."providerId", "public"."PaymentProvider"."name", "public"."PaymentProvider"."enabled", "public"."PaymentProvider"."config", "public"."PaymentProvider"."fees", "public"."PaymentProvider"."createdAt", "public"."PaymentProvider"."updatedAt" FROM "public"."PaymentProvider" WHERE "public"."PaymentProvider"."clubId" = $1 ORDER BY "public"."PaymentProvider"."createdAt" ASC OFFSET $2
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingGroupId" IN ($1,$2) OFFSET $3
prisma:query COMMIT
 GET /api/settings/payments 200 in 1183ms
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Booking"."id", "public"."Booking"."clubId", "public"."Booking"."courtId", "public"."Booking"."date", "public"."Booking"."startTime", "public"."Booking"."endTime", "public"."Booking"."duration", "public"."Booking"."playerName", "public"."Booking"."playerEmail", "public"."Booking"."playerPhone", "public"."Booking"."totalPlayers", "public"."Booking"."price", "public"."Booking"."currency", "public"."Booking"."paymentStatus"::text, "public"."Booking"."paymentType"::text, "public"."Booking"."status"::text, "public"."Booking"."checkedIn", "public"."Booking"."checkedInAt", "public"."Booking"."checkedInBy", "public"."Booking"."splitPaymentEnabled", "public"."Booking"."splitPaymentCount", "public"."Booking"."notes", "public"."Booking"."createdAt", "public"."Booking"."updatedAt", "public"."Booking"."cancelledAt", "public"."Booking"."bookingGroupId", COALESCE("aggr_selection_0_SplitPayment"."_aggr_count_SplitPayment", 0) AS "_aggr_count_SplitPayment", COALESCE("aggr_selection_1_Payment"."_aggr_count_Payment", 0) AS "_aggr_count_Payment" FROM "public"."Booking" LEFT JOIN (SELECT "public"."SplitPayment"."bookingId", COUNT(*) AS "_aggr_count_SplitPayment" FROM "public"."SplitPayment" WHERE 1=1 GROUP BY "public"."SplitPayment"."bookingId") AS "aggr_selection_0_SplitPayment" ON ("public"."Booking"."id" = "aggr_selection_0_SplitPayment"."bookingId") LEFT JOIN (SELECT "public"."Payment"."bookingId", COUNT(*) AS "_aggr_count_Payment" FROM "public"."Payment" WHERE 1=1 GROUP BY "public"."Payment"."bookingId") AS "aggr_selection_1_Payment" ON ("public"."Booking"."id" = "aggr_selection_1_Payment"."bookingId") WHERE ("public"."Booking"."clubId" = $1 AND "public"."Booking"."date" >= $2 AND "public"."Booking"."date" < $3 AND "public"."Booking"."status" <> CAST($4::text AS "public"."BookingStatus") AND "public"."Booking"."bookingGroupId" IS NULL) ORDER BY "public"."Booking"."date" ASC, "public"."Booking"."startTime" ASC OFFSET $5
prisma:query SELECT "public"."Court"."id", "public"."Court"."clubId", "public"."Court"."name", "public"."Court"."type"::text, "public"."Court"."indoor", "public"."Court"."order", "public"."Court"."active", "public"."Court"."createdAt", "public"."Court"."updatedAt" FROM "public"."Court" WHERE "public"."Court"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."SplitPayment"."id", "public"."SplitPayment"."bookingId", "public"."SplitPayment"."playerName", "public"."SplitPayment"."playerEmail", "public"."SplitPayment"."playerPhone", "public"."SplitPayment"."amount", "public"."SplitPayment"."status"::text, "public"."SplitPayment"."stripePaymentIntentId", "public"."SplitPayment"."stripeChargeId", "public"."SplitPayment"."stripeApplicationFee", "public"."SplitPayment"."stripeTransferId", "public"."SplitPayment"."createdAt", "public"."SplitPayment"."updatedAt", "public"."SplitPayment"."completedAt", "public"."SplitPayment"."bookingGroupId", "public"."SplitPayment"."paidAt", COALESCE("aggr_selection_0_Notification"."_aggr_count_Notification", 0) AS "_aggr_count_Notification" FROM "public"."SplitPayment" LEFT JOIN (SELECT "public"."Notification"."splitPaymentId", COUNT(*) AS "_aggr_count_Notification" FROM "public"."Notification" WHERE 1=1 GROUP BY "public"."Notification"."splitPaymentId") AS "aggr_selection_0_Notification" ON ("public"."SplitPayment"."id" = "aggr_selection_0_Notification"."splitPaymentId") WHERE "public"."SplitPayment"."bookingId" IN ($1,$2,$3) OFFSET $4
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Class"."id", "public"."Class"."clubId", "public"."Class"."courtId", "public"."Class"."name", "public"."Class"."description", "public"."Class"."instructorId", "public"."Class"."instructorName", "public"."Class"."level"::text, "public"."Class"."type"::text, "public"."Class"."maxStudents", "public"."Class"."enrolledCount", "public"."Class"."price", "public"."Class"."currency", "public"."Class"."date", "public"."Class"."startTime", "public"."Class"."endTime", "public"."Class"."duration", "public"."Class"."status"::text, "public"."Class"."recurring", "public"."Class"."recurringDays", "public"."Class"."notes", "public"."Class"."createdAt", "public"."Class"."updatedAt", "public"."Class"."cancelledAt", COALESCE("aggr_selection_0_ClassEnrollment"."_aggr_count_ClassEnrollment", 0) AS "_aggr_count_ClassEnrollment" FROM "public"."Class" LEFT JOIN (SELECT "public"."ClassEnrollment"."classId", COUNT(*) AS "_aggr_count_ClassEnrollment" FROM "public"."ClassEnrollment" WHERE 1=1 GROUP BY "public"."ClassEnrollment"."classId") AS "aggr_selection_0_ClassEnrollment" ON ("public"."Class"."id" = "aggr_selection_0_ClassEnrollment"."classId") WHERE ("public"."Class"."clubId" = $1 AND "public"."Class"."date" >= $2 AND "public"."Class"."date" < $3 AND "public"."Class"."status" <> CAST($4::text AS "public"."ClassStatus")) ORDER BY "public"."Class"."date" ASC, "public"."Class"."startTime" ASC OFFSET $5
prisma:query COMMIT
 GET /api/bookings?date=2025-09-24 200 in 2550ms
 ✓ Compiled in 2.8s (2248 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."status"::text, "public"."Club"."active" FROM "public"."Club" WHERE ("public"."Club"."slug" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."role"::text, "public"."User"."clubId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."UserPermission"."id", "public"."UserPermission"."moduleCode", "public"."UserPermission"."userId" FROM "public"."UserPermission" WHERE "public"."UserPermission"."userId" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubModule"."id", "public"."ClubModule"."clubId", "public"."ClubModule"."moduleId", "public"."ClubModule"."isEnabled", "public"."ClubModule"."enabledAt", "public"."ClubModule"."disabledAt", "public"."ClubModule"."gracePeriodEnd", "public"."ClubModule"."lastExportAt", "public"."ClubModule"."settings", "public"."ClubModule"."createdAt", "public"."ClubModule"."updatedAt" FROM "public"."ClubModule" WHERE ("public"."ClubModule"."clubId" = $1 AND "public"."ClubModule"."isEnabled" = $2) OFFSET $3
prisma:query COMMIT
 ✓ Compiled /api/booking-groups/[id] in 484ms (1266 modules)
prisma:query BEGIN
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session' ]
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubPackage"."id", "public"."ClubPackage"."clubId", "public"."ClubPackage"."packageId", "public"."ClubPackage"."isActive", "public"."ClubPackage"."activatedAt", "public"."ClubPackage"."deactivatedAt", "public"."ClubPackage"."customPricing", "public"."ClubPackage"."notes", "public"."ClubPackage"."createdAt", "public"."ClubPackage"."updatedAt" FROM "public"."ClubPackage" WHERE ("public"."ClubPackage"."clubId" = $1 AND "public"."ClubPackage"."isActive" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
 GET /c/club-demo-padelyzer/dashboard/bookings 200 in 3320ms
 ✓ Compiled /favicon.ico in 141ms (1268 modules)
 GET /favicon.ico 200 in 221ms
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."BookingGroup"."id", "public"."BookingGroup"."clubId", "public"."BookingGroup"."date", "public"."BookingGroup"."startTime", "public"."BookingGroup"."endTime", "public"."BookingGroup"."duration", "public"."BookingGroup"."playerName", "public"."BookingGroup"."playerEmail", "public"."BookingGroup"."playerPhone", "public"."BookingGroup"."totalPlayers", "public"."BookingGroup"."price", "public"."BookingGroup"."currency", "public"."BookingGroup"."status"::text, "public"."BookingGroup"."splitPaymentEnabled", "public"."BookingGroup"."splitPaymentCount", "public"."BookingGroup"."notes", "public"."BookingGroup"."createdAt", "public"."BookingGroup"."updatedAt", "public"."BookingGroup"."cancelledAt" FROM "public"."BookingGroup" WHERE ("public"."BookingGroup"."id" = $1 AND "public"."BookingGroup"."clubId" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
 DELETE /api/booking-groups/726422cd-45c6-48d7-bfea-544feda96e09 404 in 2409ms
 ✓ Compiled in 499ms (999 modules)
[validateRequest] Cookie name: auth-session
[validateRequest] Session ID from cookie: i6gtp74l7bptkxpyaamsvndljfvhh45nkfl6bczq
[validateRequest] All cookies: [ 'auth-session', 'padelyzer-session', '__next_hmr_refresh_hash__' ]
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Club"."id", "public"."Club"."name", "public"."Club"."status"::text, "public"."Club"."active" FROM "public"."Club" WHERE ("public"."Club"."slug" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."Session"."id", "public"."Session"."userId", "public"."Session"."expiresAt" FROM "public"."Session" WHERE ("public"."Session"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."User"."id", "public"."User"."name", "public"."User"."email", "public"."User"."emailVerified", "public"."User"."image", "public"."User"."password", "public"."User"."role"::text, "public"."User"."clubId", "public"."User"."active", "public"."User"."createdAt", "public"."User"."updatedAt" FROM "public"."User" WHERE "public"."User"."id" IN ($1) OFFSET $2
prisma:query COMMIT
[validateRequest] Session validation result: { hasSession: true, hasUser: true, sessionFresh: false }
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."User"."id", "public"."User"."role"::text, "public"."User"."clubId" FROM "public"."User" WHERE ("public"."User"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."UserPermission"."id", "public"."UserPermission"."moduleCode", "public"."UserPermission"."userId" FROM "public"."UserPermission" WHERE "public"."UserPermission"."userId" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubModule"."id", "public"."ClubModule"."clubId", "public"."ClubModule"."moduleId", "public"."ClubModule"."isEnabled", "public"."ClubModule"."enabledAt", "public"."ClubModule"."disabledAt", "public"."ClubModule"."gracePeriodEnd", "public"."ClubModule"."lastExportAt", "public"."ClubModule"."settings", "public"."ClubModule"."createdAt", "public"."ClubModule"."updatedAt" FROM "public"."ClubModule" WHERE ("public"."ClubModule"."clubId" = $1 AND "public"."ClubModule"."isEnabled" = $2) OFFSET $3
prisma:query COMMIT
prisma:query BEGIN
prisma:query DEALLOCATE ALL
prisma:query SELECT "public"."ClubPackage"."id", "public"."ClubPackage"."clubId", "public"."ClubPackage"."packageId", "public"."ClubPackage"."isActive", "public"."ClubPackage"."activatedAt", "public"."ClubPackage"."deactivatedAt", "public"."ClubPackage"."customPricing", "public"."ClubPackage"."notes", "public"."ClubPackage"."createdAt", "public"."ClubPackage"."updatedAt" FROM "public"."ClubPackage" WHERE ("public"."ClubPackage"."clubId" = $1 AND "public"."ClubPackage"."isActive" = $2) LIMIT $3 OFFSET $4
prisma:query COMMIT
 GET /c/club-demo-padelyzer/dashboard/bookings 200 in 2681ms
 GET /favicon.ico 200 in 67ms
[?25h

'use client'

import React, { useState, useEffect } from 'react'
import { CardModern, CardModernHeader, CardModernTitle, CardModernDescription, CardModernContent } from '@/components/design-system/CardModern'
import { ButtonModern } from '@/components/design-system/ButtonModern'
import { 
  Check, X, AlertTriangle, Info, 
  Smartphone, Tablet, Monitor, Eye,
  Zap, Palette, Type, Move, Hand
} from 'lucide-react'

interface ValidationItem {
  category: string
  item: string
  status: 'pass' | 'warning' | 'fail'
  score: number
  details: string
}

export default function HIGValidation() {
  const [activeCategory, setActiveCategory] = useState('all')
  const [overallScore, setOverallScore] = useState(0)

  const validationResults: ValidationItem[] = [
    // Visual Design
    { category: 'visual', item: 'Color Contrast', status: 'warning', score: 80, details: 'Primary color meets AA but not AAA standards' },
    { category: 'visual', item: 'Typography Scale', status: 'pass', score: 95, details: 'Follows SF Pro Display type scale correctly' },
    { category: 'visual', item: 'White Space', status: 'pass', score: 92, details: 'Proper spacing with 16-40px padding' },
    { category: 'visual', item: 'Visual Hierarchy', status: 'pass', score: 94, details: 'Clear depth with glassmorphism and shadows' },
    
    // Interaction
    { category: 'interaction', item: 'Touch Targets', status: 'warning', score: 75, details: 'XS and SM buttons below 44px minimum' },
    { category: 'interaction', item: 'Animation Timing', status: 'pass', score: 95, details: 'Smooth 0.3-0.4s transitions with proper easing' },
    { category: 'interaction', item: 'Hover States', status: 'pass', score: 98, details: 'All interactive elements have hover feedback' },
    { category: 'interaction', item: 'Focus Indicators', status: 'pass', score: 90, details: 'Visible focus rings with 4px spread' },
    
    // Accessibility
    { category: 'accessibility', item: 'ARIA Labels', status: 'warning', score: 85, details: 'Most elements labeled, some missing' },
    { category: 'accessibility', item: 'Keyboard Navigation', status: 'pass', score: 88, details: 'Tab order logical and functional' },
    { category: 'accessibility', item: 'Screen Reader', status: 'warning', score: 82, details: 'Needs aria-live regions for dynamic content' },
    { category: 'accessibility', item: 'Color Blind Safe', status: 'pass', score: 90, details: 'Green palette distinguishable in most cases' },
    
    // Performance
    { category: 'performance', item: 'Animation FPS', status: 'pass', score: 95, details: 'Maintains 60fps during animations' },
    { category: 'performance', item: 'Load Time', status: 'pass', score: 88, details: 'Components load within 2 seconds' },
    { category: 'performance', item: 'Memory Usage', status: 'pass', score: 92, details: 'Efficient React rendering' },
    { category: 'performance', item: 'Bundle Size', status: 'warning', score: 78, details: 'Could benefit from code splitting' },
  ]

  useEffect(() => {
    const scores = validationResults
      .filter(item => activeCategory === 'all' || item.category === activeCategory)
      .map(item => item.score)
    const avg = scores.reduce((a, b) => a + b, 0) / scores.length
    setOverallScore(Math.round(avg))
  }, [activeCategory])

  const getStatusIcon = (status: string) => {
    switch (status) {
      case 'pass':
        return <Check size={16} style={{ color: '#16a34a' }} />
      case 'warning':
        return <AlertTriangle size={16} style={{ color: '#f59e0b' }} />
      case 'fail':
        return <X size={16} style={{ color: '#dc2626' }} />
      default:
        return null
    }
  }

  const getScoreColor = (score: number) => {
    if (score >= 90) return '#16a34a'
    if (score >= 70) return '#f59e0b'
    return '#dc2626'
  }

  const categories = [
    { id: 'all', name: 'All Categories', icon: <Eye size={18} /> },
    { id: 'visual', name: 'Visual Design', icon: <Palette size={18} /> },
    { id: 'interaction', name: 'Interaction', icon: <Hand size={18} /> },
    { id: 'accessibility', name: 'Accessibility', icon: <Eye size={18} /> },
    { id: 'performance', name: 'Performance', icon: <Zap size={18} /> },
  ]

  return (
    <div style={{
      minHeight: '100vh',
      background: 'linear-gradient(180deg, #ffffff 0%, #f0f4ed 100%)',
      padding: '40px 20px',
      fontFamily: '-apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, sans-serif'
    }}>
      {/* Header */}
      <div style={{
        maxWidth: '1200px',
        margin: '0 auto',
        textAlign: 'center',
        marginBottom: '60px'
      }}>
        <h1 style={{
          fontSize: '48px',
          fontWeight: 700,
          background: 'linear-gradient(135deg, #182A01 0%, #A4DF4E 100%)',
          WebkitBackgroundClip: 'text',
          WebkitTextFillColor: 'transparent',
          backgroundClip: 'text',
          marginBottom: '16px',
          letterSpacing: '-0.03em'
        }}>
          Apple HIG Validation
        </h1>
        <p style={{
          fontSize: '20px',
          color: '#516640',
          fontWeight: 300
        }}>
          Human Interface Guidelines Compliance Report
        </p>
      </div>

      {/* Overall Score */}
      <div style={{ maxWidth: '1200px', margin: '0 auto 60px' }}>
        <CardModern variant="glow">
          <div style={{
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'space-between',
            flexWrap: 'wrap',
            gap: '32px'
          }}>
            <div>
              <h2 style={{ fontSize: '24px', fontWeight: 600, color: '#182A01', marginBottom: '8px' }}>
                Overall Compliance Score
              </h2>
              <p style={{ color: '#516640' }}>
                Based on Apple Human Interface Guidelines
              </p>
            </div>
            <div style={{
              display: 'flex',
              alignItems: 'center',
              gap: '24px'
            }}>
              {/* Score Circle */}
              <div style={{
                width: '120px',
                height: '120px',
                borderRadius: '50%',
                background: `conic-gradient(${getScoreColor(overallScore)} ${overallScore * 3.6}deg, #e2e8dd 0deg)`,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                position: 'relative'
              }}>
                <div style={{
                  width: '100px',
                  height: '100px',
                  borderRadius: '50%',
                  background: 'white',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center',
                  flexDirection: 'column'
                }}>
                  <span style={{ fontSize: '32px', fontWeight: 700, color: '#182A01' }}>
                    {overallScore}
                  </span>
                  <span style={{ fontSize: '12px', color: '#516640' }}>
                    / 100
                  </span>
                </div>
              </div>
              
              {/* Grade */}
              <div style={{ textAlign: 'center' }}>
                <div style={{
                  fontSize: '48px',
                  fontWeight: 700,
                  color: getScoreColor(overallScore)
                }}>
                  {overallScore >= 90 ? 'A' : overallScore >= 80 ? 'B' : overallScore >= 70 ? 'C' : 'D'}
                </div>
                <div style={{ fontSize: '14px', color: '#516640' }}>
                  Grade
                </div>
              </div>
            </div>
          </div>
        </CardModern>
      </div>

      {/* Category Filters */}
      <div style={{ maxWidth: '1200px', margin: '0 auto 40px' }}>
        <div style={{ display: 'flex', gap: '12px', flexWrap: 'wrap' }}>
          {categories.map((cat) => (
            <ButtonModern
              key={cat.id}
              variant={activeCategory === cat.id ? 'primary' : 'secondary'}
              size="sm"
              icon={cat.icon}
              onClick={() => setActiveCategory(cat.id)}
            >
              {cat.name}
            </ButtonModern>
          ))}
        </div>
      </div>

      {/* Validation Results */}
      <div style={{ maxWidth: '1200px', margin: '0 auto' }}>
        <div style={{ display: 'grid', gap: '20px' }}>
          {validationResults
            .filter(item => activeCategory === 'all' || item.category === activeCategory)
            .map((item, index) => (
              <CardModern key={index} variant="glass" interactive>
                <div style={{
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'space-between',
                  gap: '20px'
                }}>
                  <div style={{ display: 'flex', alignItems: 'center', gap: '16px', flex: 1 }}>
                    {getStatusIcon(item.status)}
                    <div>
                      <h3 style={{
                        fontSize: '16px',
                        fontWeight: 600,
                        color: '#182A01',
                        marginBottom: '4px'
                      }}>
                        {item.item}
                      </h3>
                      <p style={{
                        fontSize: '14px',
                        color: '#516640'
                      }}>
                        {item.details}
                      </p>
                    </div>
                  </div>
                  
                  {/* Score Bar */}
                  <div style={{
                    display: 'flex',
                    alignItems: 'center',
                    gap: '12px',
                    minWidth: '150px'
                  }}>
                    <div style={{
                      flex: 1,
                      height: '8px',
                      background: '#e2e8dd',
                      borderRadius: '4px',
                      overflow: 'hidden'
                    }}>
                      <div style={{
                        width: `${item.score}%`,
                        height: '100%',
                        background: getScoreColor(item.score),
                        transition: 'width 0.5s ease'
                      }} />
                    </div>
                    <span style={{
                      fontSize: '14px',
                      fontWeight: 600,
                      color: getScoreColor(item.score),
                      minWidth: '35px',
                      textAlign: 'right'
                    }}>
                      {item.score}%
                    </span>
                  </div>
                </div>
              </CardModern>
            ))}
        </div>
      </div>

      {/* Device Preview */}
      <div style={{ maxWidth: '1200px', margin: '60px auto 0' }}>
        <h2 style={{
          fontSize: '28px',
          fontWeight: 600,
          color: '#182A01',
          marginBottom: '32px'
        }}>
          Device Compatibility
        </h2>
        
        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '24px' }}>
          <CardModern variant="gradient" interactive>
            <CardModernHeader>
              <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
                <Smartphone size={24} color="#A4DF4E" />
                <CardModernTitle>iPhone 14 Pro</CardModernTitle>
              </div>
              <CardModernDescription>390 × 844 pixels</CardModernDescription>
            </CardModernHeader>
            <CardModernContent>
              <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>
                <div style={{ display: 'flex', justifyContent: 'space-between' }}>
                  <span>Touch Targets</span>
                  <span style={{ color: '#f59e0b' }}>⚠️ Needs Work</span>
                </div>
                <div style={{ display: 'flex', justifyContent: 'space-between' }}>
                  <span>Readability</span>
                  <span style={{ color: '#16a34a' }}>✓ Excellent</span>
                </div>
                <div style={{ display: 'flex', justifyContent: 'space-between' }}>
                  <span>Safe Areas</span>
                  <span style={{ color: '#16a34a' }}>✓ Respected</span>
                </div>
              </div>
            </CardModernContent>
          </CardModern>

          <CardModern variant="gradient" interactive>
            <CardModernHeader>
              <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
                <Tablet size={24} color="#66E7AA" />
                <CardModernTitle>iPad Pro</CardModernTitle>
              </div>
              <CardModernDescription>1024 × 1366 pixels</CardModernDescription>
            </CardModernHeader>
            <CardModernContent>
              <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>
                <div style={{ display: 'flex', justifyContent: 'space-between' }}>
                  <span>Layout Adaptation</span>
                  <span style={{ color: '#16a34a' }}>✓ Optimized</span>
                </div>
                <div style={{ display: 'flex', justifyContent: 'space-between' }}>
                  <span>Multitasking</span>
                  <span style={{ color: '#16a34a' }}>✓ Supported</span>
                </div>
                <div style={{ display: 'flex', justifyContent: 'space-between' }}>
                  <span>Orientation</span>
                  <span style={{ color: '#f59e0b' }}>⚠️ Portrait Only</span>
                </div>
              </div>
            </CardModernContent>
          </CardModern>

          <CardModern variant="gradient" interactive>
            <CardModernHeader>
              <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
                <Monitor size={24} color="#7cb342" />
                <CardModernTitle>MacBook Pro</CardModernTitle>
              </div>
              <CardModernDescription>1440 × 900 pixels</CardModernDescription>
            </CardModernHeader>
            <CardModernContent>
              <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>
                <div style={{ display: 'flex', justifyContent: 'space-between' }}>
                  <span>Hover States</span>
                  <span style={{ color: '#16a34a' }}>✓ Perfect</span>
                </div>
                <div style={{ display: 'flex', justifyContent: 'space-between' }}>
                  <span>Keyboard Nav</span>
                  <span style={{ color: '#16a34a' }}>✓ Complete</span>
                </div>
                <div style={{ display: 'flex', justifyContent: 'space-between' }}>
                  <span>Performance</span>
                  <span style={{ color: '#16a34a' }}>✓ Excellent</span>
                </div>
              </div>
            </CardModernContent>
          </CardModern>
        </div>
      </div>

      {/* Recommendations */}
      <div style={{ maxWidth: '1200px', margin: '60px auto 0' }}>
        <CardModern variant="glow">
          <CardModernHeader>
            <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
              <Info size={24} color="#A4DF4E" />
              <CardModernTitle>Priority Improvements</CardModernTitle>
            </div>
            <CardModernDescription>Actions to achieve 100% compliance</CardModernDescription>
          </CardModernHeader>
          <CardModernContent>
            <ol style={{ paddingLeft: '20px', lineHeight: 2 }}>
              <li><strong>Increase Touch Targets:</strong> Minimum 44×44px for all interactive elements</li>
              <li><strong>Improve Color Contrast:</strong> Adjust primary green to #8BC43F for WCAG AAA</li>
              <li><strong>Add Responsive Breakpoints:</strong> Optimize for 320px, 768px, and 1024px</li>
              <li><strong>Implement Dark Mode:</strong> Support system preference with proper contrast</li>
              <li><strong>Add Haptic Feedback:</strong> For mobile web where supported</li>
            </ol>
            <div style={{ marginTop: '24px', display: 'flex', gap: '12px' }}>
              <ButtonModern variant="primary" size="md">
                Download Full Report
              </ButtonModern>
              <ButtonModern variant="secondary" size="md">
                Schedule Review
              </ButtonModern>
            </div>
          </CardModernContent>
        </CardModern>
      </div>
    </div>
  )
}